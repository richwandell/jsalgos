!function(t){function o(a){if(i[a])return i[a].exports;var e=i[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,o),e.l=!0,e.exports}var i={};o.m=t,o.c=i,o.i=function(t){return t},o.d=function(t,i,a){o.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:a})},o.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(i,"a",i),i},o.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},o.p="",o(o.s=1)}([function(t,o,i){"use strict";function a(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,o){for(var i=0;i<o.length;i++){var a=o[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(o,i,a){return i&&t(o.prototype,i),a&&t(o,a),o}}();new(function(){function t(){var o=this;a(this,t),$(function(){o.can=$("#geometry_canvas")[0],o.ctx=o.can.getContext("2d",{alpha:!1}),o.can.width=window.innerWidth,o.can.height=window.innerHeight,o.rotationX=Number($("#rotationx").val()),o.rotationY=Number($("#rotationy").val()),o.rotationZ=Number($("#rotationz").val()),o.projection=$("#projection").val(),o.boxZ=Number($("#boxz").val()),o.mouseX=o.can.width/2,o.mouseY=o.can.height/2,o.camera={x:0,y:0,z:Number($("#focallength").val()),rx:0,ry:0,rz:0,width:o.can.width,height:o.can.height,center:{x:o.can.width/2,y:o.can.height/2}},o.bindEvents(),requestAnimationFrame(function(){return o.draw()})})}return e(t,[{key:"bindEvents",value:function(){var t=this;$("#boxz").change(function(){t.boxZ=Number($("#boxz").val())}),$("#focallength").change(function(){t.camera.z=Number($("#focallength").val())}),$("#projection").change(function(){t.projection=$("#projection").val()}),$("#rotationx").change(function(){t.rotationX=Number($("#rotationx").val())}),$("#rotationy").change(function(){t.rotationY=Number($("#rotationy").val())}),$("#rotationz").change(function(){t.rotationZ=Number($("#rotationz").val())}),$(this.can).on({wheel:function(o){t.boxZ+=o.originalEvent.deltaY},mouseup:function(o){t.mouseDown=!1},mousedown:function(o){t.mouseDown=!0,t.mouseStartX=o.originalEvent.clientX,t.mouseStartY=o.originalEvent.clientY,t.mouseStartRotationX=t.rotationX,t.mouseStartRotationY=t.rotationY},mousemove:function(o){t.mouseX=o.originalEvent.clientX,t.mouseY=o.originalEvent.clientY,t.mouseDown&&(t.rotationX=t.mouseStartRotationX+(t.mouseStartX-t.mouseX),t.rotationY=t.mouseStartRotationY+(t.mouseStartY-t.mouseY),$("#rotationx").val(t.rotationX),$("#rotationy").val(t.rotationY))},touchstart:function(o){t.mouseStartX=o.originalEvent.changedTouches[0].clientX,t.mouseStartY=o.originalEvent.changedTouches[0].clientY,t.mouseStartRotationX=t.rotationX,t.mouseStartRotationY=t.rotationY},touchmove:function(o){t.mouseX=o.originalEvent.changedTouches[0].clientX,t.mouseY=o.originalEvent.changedTouches[0].clientY,o.originalEvent.changedTouches.length>1&&(t.rotationX=t.mouseStartRotationX+(t.mouseStartX-t.mouseX),t.rotationY=t.mouseStartRotationY+(t.mouseStartY-t.mouseY),$("#rotationx").val(t.rotationX),$("#rotationy").val(t.rotationY))},touchend:function(o){t.mouseX=o.originalEvent.changedTouches[0].clientX,t.mouseY=o.originalEvent.changedTouches[0].clientY}})}},{key:"draw",value:function(){var t=this;this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.can.width,this.can.height),this.drawSquare(),this.drawBox(),requestAnimationFrame(function(){return t.draw()})}},{key:"drawBox",value:function(){var t=this.mouseX,o=this.mouseY;"p"===this.projection&&(t=this.can.width/2-this.mouseX,o=this.can.height/2-this.mouseY);var i=this.boxZ,a=math.matrix([[t-200,o-200,i-200],[t+200,o-200,i-200],[t+200,o+200,i-200],[t-200,o+200,i-200],[t-200,o-200,i+200],[t+200,o-200,i+200],[t+200,o+200,i+200],[t-200,o+200,i+200]]);a=this.makeHomogeneous(a);var e=this.getCentroid3d(a).toArray();a=this.rotate3d(a,e,this.rotationX,this.rotationY,this.rotationZ);var n=void 0;switch(this.projection){case"o":n=this.projectOrthographic(a);break;case"p":n=this.projectPerspective(a,e)}this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255, 0, 0)",this.ctx.moveTo(n[0][0],n[0][1]),this.ctx.lineTo(n[1][0],n[1][1]),this.ctx.lineTo(n[2][0],n[2][1]),this.ctx.lineTo(n[3][0],n[3][1]),this.ctx.lineTo(n[0][0],n[0][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(0, 255, 0)",this.ctx.moveTo(n[4][0],n[4][1]),this.ctx.lineTo(n[5][0],n[5][1]),this.ctx.lineTo(n[6][0],n[6][1]),this.ctx.lineTo(n[7][0],n[7][1]),this.ctx.lineTo(n[4][0],n[4][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(0, 0, 255)",this.ctx.moveTo(n[0][0],n[0][1]),this.ctx.lineTo(n[4][0],n[4][1]),this.ctx.lineTo(n[7][0],n[7][1]),this.ctx.lineTo(n[3][0],n[3][1]),this.ctx.lineTo(n[0][0],n[0][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255, 255, 255)",this.ctx.moveTo(n[1][0],n[1][1]),this.ctx.lineTo(n[5][0],n[5][1]),this.ctx.lineTo(n[6][0],n[6][1]),this.ctx.lineTo(n[2][0],n[2][1]),this.ctx.lineTo(n[1][0],n[1][1]),this.ctx.stroke()}},{key:"rotate3d",value:function(t,o,i,a,e){i*=Math.PI/180,a*=Math.PI/180,e*=Math.PI/180;var n=math.matrix([[1,0,0,-o[0]],[0,1,0,-o[1]],[0,0,1,-o[2]],[0,0,0,1]]),r=math.matrix([[1,0,0,o[0]],[0,1,0,o[1]],[0,0,1,o[2]],[0,0,0,1]]),h=math.matrix([[1,0,0,0],[0,Math.cos(i),-Math.sin(i),0],[0,Math.sin(i),Math.cos(i),0],[0,0,0,1]]),c=math.matrix([[Math.cos(a),0,-Math.sin(a),0],[0,1,0,0],[Math.sin(a),0,Math.cos(a),0],[0,0,0,1]]),s=math.matrix([[Math.cos(e),-Math.sin(e),0,0],[Math.sin(e),Math.cos(e),0,0],[0,0,1,0],[0,0,0,1]]),u=[],l=!0,m=!1,v=void 0;try{for(var x,f=t._data[Symbol.iterator]();!(l=(x=f.next()).done);l=!0){var d=x.value;d=math.multiply(n,d),d=math.multiply(h,d),d=math.multiply(c,d),d=math.multiply(s,d),d=math.multiply(r,d),u.push(d)}}catch(t){m=!0,v=t}finally{try{!l&&f.return&&f.return()}finally{if(m)throw v}}return math.matrix(u)}},{key:"projectPerspective",value:function(t){var o=this.camera.z,i=math.matrix([[1,0,this.can.width/2],[0,1,this.can.height/2],[0,0,1]]),a=[],e=!0,n=!1,r=void 0;try{for(var h,c=t._data[Symbol.iterator]();!(e=(h=c.next()).done);e=!0){var s=h.value,u=o*(s[0]/s[2]),l=o*(s[1]/s[2]);s=math.matrix([u,l,1]),s=math.multiply(i,s),a.push([s._data[0],s._data[1]])}}catch(t){n=!0,r=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw r}}return a}},{key:"projectOrthographic",value:function(t){var o=[],i=!0,a=!1,e=void 0;try{for(var n,r=t._data[Symbol.iterator]();!(i=(n=r.next()).done);i=!0){var h=n.value;o.push([h[0],h[1]])}}catch(t){a=!0,e=t}finally{try{!i&&r.return&&r.return()}finally{if(a)throw e}}return o}},{key:"drawSquare",value:function(){var t=this.mouseX-100,o=this.mouseY-100,i=math.matrix([[t,o],[t+200,o],[t+200,o+200],[t,o+200]]);i=this.makeHomogeneous(i),i=this.rotate2d(i,this.rotationX).toArray(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.beginPath(),this.ctx.moveTo(i[0][0],i[0][1]),this.ctx.lineTo(i[1][0],i[1][1]),this.ctx.lineTo(i[2][0],i[2][1]),this.ctx.lineTo(i[3][0],i[3][1]),this.ctx.closePath(),this.ctx.fill()}},{key:"makeHomogeneous",value:function(t){return t.resize([t.size()[0],t.size()[1]+1],1),t}},{key:"rotate2d",value:function(t,o){o*=Math.PI/180;var i=this.getCentroid2d(t).toArray(),a=math.matrix([[Math.cos(o),-Math.sin(o),0],[Math.sin(o),Math.cos(o),0],[0,0,1]]),e=math.matrix([[1,0,-i[0]],[0,1,-i[1]],[0,0,1]]),n=math.matrix([[1,0,i[0]],[0,1,i[1]],[0,0,1]]),r=[],h=!0,c=!1,s=void 0;try{for(var u,l=t._data[Symbol.iterator]();!(h=(u=l.next()).done);h=!0){var m=u.value,v=math.multiply(e,m),x=math.multiply(a,v),f=math.multiply(n,x);r.push(f)}}catch(t){c=!0,s=t}finally{try{!h&&l.return&&l.return()}finally{if(c)throw s}}return math.matrix(r)}},{key:"getCentroid2d",value:function(t){var o=0,i=0,a=!0,e=!1,n=void 0;try{for(var r,h=t._data[Symbol.iterator]();!(a=(r=h.next()).done);a=!0){var c=r.value;o+=c[0],i+=c[1]}}catch(t){e=!0,n=t}finally{try{!a&&h.return&&h.return()}finally{if(e)throw n}}return math.matrix([o/t._data.length,i/t._data.length])}},{key:"getCentroid3d",value:function(t){var o=0,i=0,a=0,e=!0,n=!1,r=void 0;try{for(var h,c=t._data[Symbol.iterator]();!(e=(h=c.next()).done);e=!0){var s=h.value;o+=s[0],i+=s[1],a+=s[2]}}catch(t){n=!0,r=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw r}}return math.matrix([o/t._data.length,i/t._data.length,a/t._data.length])}}]),t}())},function(t,o,i){t.exports=i(0)}]);
//# sourceMappingURL=Project.js.map