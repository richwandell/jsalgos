!function(t){function i(o){if(a[o])return a[o].exports;var e=a[o]={i:o,l:!1,exports:{}};return t[o].call(e.exports,e,e.exports,i),e.l=!0,e.exports}var a={};i.m=t,i.c=a,i.i=function(t){return t},i.d=function(t,a,o){i.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:o})},i.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="",i(i.s=1)}([function(t,i,a){"use strict";function o(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}var e=function(){function t(t,i){for(var a=0;a<i.length;a++){var o=i[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(i,a,o){return a&&t(i.prototype,a),o&&t(i,o),i}}();new(function(){function t(){var i=this;o(this,t),$(function(){i.can=$("#geometry_canvas")[0],i.ctx=i.can.getContext("2d",{alpha:!1}),i.can.width=window.innerWidth,i.can.height=window.innerHeight,i.rotationX=Number($("#rotationx").val()),i.rotationY=Number($("#rotationy").val()),i.rotationZ=Number($("#rotationz").val()),i.projection=$("#projection").val(),i.boxZ=Number($("#boxz").val()),i.mouseX=i.can.width/2,i.mouseY=i.can.height/2,i.camera={x:0,y:0,z:Number($("#focallength").val()),rx:0,ry:0,rz:0,width:i.can.width,height:i.can.height,center:{x:i.can.width/2,y:i.can.height/2}},i.bindEvents(),requestAnimationFrame(function(){return i.draw()})})}return e(t,[{key:"bindEvents",value:function(){var t=this;$("#boxz").change(function(){t.boxZ=Number($("#boxz").val())}),$("#focallength").change(function(){t.camera.z=Number($("#focallength").val())}),$("#projection").change(function(){t.projection=$("#projection").val()}),$("#rotationx").change(function(){t.rotationX=Number($("#rotationx").val())}),$("#rotationy").change(function(){t.rotationY=Number($("#rotationy").val())}),$("#rotationz").change(function(){t.rotationZ=Number($("#rotationz").val())}),$(this.can).on({wheel:function(i){t.boxZ+=i.originalEvent.deltaY},mouseup:function(i){t.mouseDown=!1},mousedown:function(i){t.mouseDown=!0,t.mouseStartX=i.originalEvent.clientX,t.mouseStartY=i.originalEvent.clientY,t.mouseStartRotationX=t.rotationX,t.mouseStartRotationY=t.rotationY},mousemove:function(i){t.mouseX=i.originalEvent.clientX,t.mouseY=i.originalEvent.clientY,t.mouseDown&&(t.rotationX=t.mouseStartRotationX+(t.mouseStartX-t.mouseX),t.rotationY=t.mouseStartRotationY+(t.mouseStartY-t.mouseY),$("#rotationx").val(t.rotationX),$("#rotationy").val(t.rotationY))}})}},{key:"draw",value:function(){var t=this;this.ctx.clearRect(0,0,this.can.width,this.can.height),this.drawSquare(),this.drawBox(),requestAnimationFrame(function(){return t.draw()})}},{key:"drawBox",value:function(){var t=this.mouseX,i=this.mouseY;"p"===this.projection&&(t=this.can.width/2-this.mouseX,i=this.can.height/2-this.mouseY);var a=this.boxZ,o=math.matrix([[t-200,i-200,a-200],[t+200,i-200,a-200],[t+200,i+200,a-200],[t-200,i+200,a-200],[t-200,i-200,a+200],[t+200,i-200,a+200],[t+200,i+200,a+200],[t-200,i+200,a+200]]);o=this.makeHomogeneous(o);var e=this.getCentroid3d(o).toArray();o=this.rotate3d(o,e,this.rotationX,this.rotationY,this.rotationZ);var n=void 0;switch(this.projection){case"o":n=this.projectOrthographic(o);break;case"p":n=this.projectPerspective(o,e)}this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255, 0, 0)",this.ctx.moveTo(n[0][0],n[0][1]),this.ctx.lineTo(n[1][0],n[1][1]),this.ctx.lineTo(n[2][0],n[2][1]),this.ctx.lineTo(n[3][0],n[3][1]),this.ctx.lineTo(n[0][0],n[0][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(0, 255, 0)",this.ctx.moveTo(n[4][0],n[4][1]),this.ctx.lineTo(n[5][0],n[5][1]),this.ctx.lineTo(n[6][0],n[6][1]),this.ctx.lineTo(n[7][0],n[7][1]),this.ctx.lineTo(n[4][0],n[4][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(0, 0, 255)",this.ctx.moveTo(n[0][0],n[0][1]),this.ctx.lineTo(n[4][0],n[4][1]),this.ctx.lineTo(n[7][0],n[7][1]),this.ctx.lineTo(n[3][0],n[3][1]),this.ctx.lineTo(n[0][0],n[0][1]),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.strokeStyle="rgb(255, 255, 255)",this.ctx.moveTo(n[1][0],n[1][1]),this.ctx.lineTo(n[5][0],n[5][1]),this.ctx.lineTo(n[6][0],n[6][1]),this.ctx.lineTo(n[2][0],n[2][1]),this.ctx.lineTo(n[1][0],n[1][1]),this.ctx.stroke()}},{key:"rotate3d",value:function(t,i,a,o,e){a*=Math.PI/180,o*=Math.PI/180,e*=Math.PI/180;var n=math.matrix([[1,0,0,-i[0]],[0,1,0,-i[1]],[0,0,1,-i[2]],[0,0,0,1]]),r=math.matrix([[1,0,0,i[0]],[0,1,0,i[1]],[0,0,1,i[2]],[0,0,0,1]]),h=math.matrix([[1,0,0,0],[0,Math.cos(a),-Math.sin(a),0],[0,Math.sin(a),Math.cos(a),0],[0,0,0,1]]),c=math.matrix([[Math.cos(o),0,-Math.sin(o),0],[0,1,0,0],[Math.sin(o),0,Math.cos(o),0],[0,0,0,1]]),s=math.matrix([[Math.cos(e),-Math.sin(e),0,0],[Math.sin(e),Math.cos(e),0,0],[0,0,1,0],[0,0,0,1]]),u=[],l=!0,m=!1,v=void 0;try{for(var x,f=t._data[Symbol.iterator]();!(l=(x=f.next()).done);l=!0){var y=x.value;y=math.multiply(n,y),y=math.multiply(h,y),y=math.multiply(c,y),y=math.multiply(s,y),y=math.multiply(r,y),u.push(y)}}catch(t){m=!0,v=t}finally{try{!l&&f.return&&f.return()}finally{if(m)throw v}}return math.matrix(u)}},{key:"projectPerspective",value:function(t,i){var a=this.camera.z,o=a/i[1],e=(i[0],i[2],math.matrix([[1,0,this.can.width/2],[0,1,this.can.height/2],[0,0,1]])),n=[],r=!0,h=!1,c=void 0;try{for(var s,u=t._data[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var l=s.value,m=a*(l[0]/l[2]),v=a*(l[1]/l[2]);l=math.matrix([m,v,1]),l=math.multiply(e,l),n.push([l._data[0],l._data[1]])}}catch(t){h=!0,c=t}finally{try{!r&&u.return&&u.return()}finally{if(h)throw c}}return n}},{key:"projectOrthographic",value:function(t){var i=[],a=!0,o=!1,e=void 0;try{for(var n,r=t._data[Symbol.iterator]();!(a=(n=r.next()).done);a=!0){var h=n.value;i.push([h[0],h[1]])}}catch(t){o=!0,e=t}finally{try{!a&&r.return&&r.return()}finally{if(o)throw e}}return i}},{key:"drawSquare",value:function(){var t=this.mouseX-100,i=this.mouseY-100,a=math.matrix([[t,i],[t+200,i],[t+200,i+200],[t,i+200]]);a=this.makeHomogeneous(a),a=this.rotate2d(a,this.rotationX).toArray(),this.ctx.fillStyle="rgb(255, 255, 255)",this.ctx.beginPath(),this.ctx.moveTo(a[0][0],a[0][1]),this.ctx.lineTo(a[1][0],a[1][1]),this.ctx.lineTo(a[2][0],a[2][1]),this.ctx.lineTo(a[3][0],a[3][1]),this.ctx.closePath(),this.ctx.fill()}},{key:"makeHomogeneous",value:function(t){return t.resize([t.size()[0],t.size()[1]+1],1),t}},{key:"rotate2d",value:function(t,i){i*=Math.PI/180;var a=this.getCentroid2d(t).toArray(),o=math.matrix([[Math.cos(i),-Math.sin(i),0],[Math.sin(i),Math.cos(i),0],[0,0,1]]),e=math.matrix([[1,0,-a[0]],[0,1,-a[1]],[0,0,1]]),n=math.matrix([[1,0,a[0]],[0,1,a[1]],[0,0,1]]),r=[],h=!0,c=!1,s=void 0;try{for(var u,l=t._data[Symbol.iterator]();!(h=(u=l.next()).done);h=!0){var m=u.value,v=math.multiply(e,m),x=math.multiply(o,v),f=math.multiply(n,x);r.push(f)}}catch(t){c=!0,s=t}finally{try{!h&&l.return&&l.return()}finally{if(c)throw s}}return math.matrix(r)}},{key:"getCentroid2d",value:function(t){var i=0,a=0,o=!0,e=!1,n=void 0;try{for(var r,h=t._data[Symbol.iterator]();!(o=(r=h.next()).done);o=!0){var c=r.value;i+=c[0],a+=c[1]}}catch(t){e=!0,n=t}finally{try{!o&&h.return&&h.return()}finally{if(e)throw n}}return math.matrix([i/t._data.length,a/t._data.length])}},{key:"getCentroid3d",value:function(t){var i=0,a=0,o=0,e=!0,n=!1,r=void 0;try{for(var h,c=t._data[Symbol.iterator]();!(e=(h=c.next()).done);e=!0){var s=h.value;i+=s[0],a+=s[1],o+=s[2]}}catch(t){n=!0,r=t}finally{try{!e&&c.return&&c.return()}finally{if(n)throw r}}return math.matrix([i/t._data.length,a/t._data.length,o/t._data.length])}}]),t}())},function(t,i,a){t.exports=a(0)}]);
//# sourceMappingURL=Project.js.map