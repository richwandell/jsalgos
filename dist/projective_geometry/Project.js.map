{"version":3,"sources":["webpack:///dist/projective_geometry/Project.js","webpack:///webpack/bootstrap 97066fc805a875422f7e","webpack:///./src/projective_geometry/Project.es6"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Project","_this","this","$","can","ctx","getContext","alpha","width","window","innerWidth","height","innerHeight","rotationX","Number","val","rotationY","rotationZ","projection","boxZ","mouseX","mouseY","camera","x","y","z","rx","ry","rz","center","bindEvents","requestAnimationFrame","draw","_this2","change","on","wheel","e","originalEvent","deltaY","mouseup","mouseDown","mousedown","mouseStartX","clientX","mouseStartY","clientY","mouseStartRotationX","mouseStartRotationY","mousemove","_this3","fillStyle","fillRect","drawSquare","drawBox","math","matrix","makeHomogeneous","getCentroid3d","toArray","rotate3d","v","projectOrthographic","projectPerspective","beginPath","strokeStyle","moveTo","lineTo","stroke","xRotation","yRotation","zRotation","Math","PI","translateCenterMatrix","translateBackMatrix","xRotationMatrix","cos","sin","yRotationMatrix","zRotationMatrix","newc","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","_data","Symbol","iterator","next","done","row","multiply","push","err","return","vertexes","r","vs","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","size","rotate2d","closePath","fill","resize","theta","getCentroid2d","rotationMatrix","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","tcm","rm","tbm","points","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6"],"mappings":"CAAS,SAAUA,GCInB,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAE,OAGA,IAAAC,GAAAF,EAAAD,IACAI,EAAAJ,EACAK,GAAA,EACAH,WAUA,OANAJ,GAAAE,GAAAM,KAAAH,EAAAD,QAAAC,IAAAD,QAAAH,GAGAI,EAAAE,GAAA,EAGAF,EAAAD,QAvBA,GAAAD,KA4BAF,GAAAQ,EAAAT,EAGAC,EAAAS,EAAAP,EAGAF,EAAAK,EAAA,SAAAK,GAA2C,MAAAA,IAG3CV,EAAAW,EAAA,SAAAR,EAAAS,EAAAC,GACAb,EAAAc,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAb,EAAAoB,EAAA,SAAAhB,GACA,GAAAS,GAAAT,KAAAiB,WACA,WAA2B,MAAAjB,GAAA,SAC3B,WAAiC,MAAAA,GAEjC,OADAJ,GAAAW,EAAAE,EAAA,IAAAA,GACAA,GAIAb,EAAAc,EAAA,SAAAQ,EAAAC,GAAsD,MAAAR,QAAAS,UAAAC,eAAAlB,KAAAe,EAAAC,IAGtDvB,EAAA0B,EAAA,GAGA1B,IAAA2B,EAAA,KDMM,SAAUvB,EAAQD,EAASH,GAEjC,YAKA,SAAS4B,GAAgBC,EAAUC,GAAe,KAAMD,YAAoBC,IAAgB,KAAM,IAAIC,WAAU,qCAFhH,GAAIC,GAAe,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAI9B,GAAI,EAAGA,EAAI8B,EAAMC,OAAQ/B,IAAK,CAAE,GAAIgC,GAAaF,EAAM9B,EAAIgC,GAAWnB,WAAamB,EAAWnB,aAAc,EAAOmB,EAAWpB,cAAe,EAAU,SAAWoB,KAAYA,EAAWC,UAAW,GAAMvB,OAAOC,eAAekB,EAAQG,EAAWE,IAAKF,IAAiB,MAAO,UAAUP,EAAaU,EAAYC,GAAiJ,MAA9HD,IAAYP,EAAiBH,EAAYN,UAAWgB,GAAiBC,GAAaR,EAAiBH,EAAaW,GAAqBX,KE3EhiB,gBAEI,QAAAY,KAAc,GAAAC,GAAAC,IAAAhB,GAAAgB,KAAAF,GACVG,EAAE,WACEF,EAAKG,IAAMD,EAAE,oBAAoB,GACjCF,EAAKI,IAAMJ,EAAKG,IAAIE,WAAW,MAAOC,OAAO,IAC7CN,EAAKG,IAAII,MAAQC,OAAOC,WACxBT,EAAKG,IAAIO,OAASF,OAAOG,YACzBX,EAAKY,UAAYC,OAAOX,EAAE,cAAcY,OACxCd,EAAKe,UAAYF,OAAOX,EAAE,cAAcY,OACxCd,EAAKgB,UAAYH,OAAOX,EAAE,cAAcY,OACxCd,EAAKiB,WAAaf,EAAE,eAAeY,MACnCd,EAAKkB,KAAOL,OAAOX,EAAE,SAASY,OAC9Bd,EAAKmB,OAASnB,EAAKG,IAAII,MAAQ,EAC/BP,EAAKoB,OAASpB,EAAKG,IAAIO,OAAS,EAChCV,EAAKqB,QACDC,EAAG,EACHC,EAAG,EACHC,EAAGX,OAAOX,EAAE,gBAAgBY,OAC5BW,GAAI,EACJC,GAAI,EACJC,GAAI,EACJpB,MAAOP,EAAKG,IAAII,MAChBG,OAAQV,EAAKG,IAAIO,OACjBkB,QACIN,EAAGtB,EAAKG,IAAII,MAAQ,EACpBgB,EAAGvB,EAAKG,IAAIO,OAAS,IAG7BV,EAAK6B,aACLC,sBAAsB,iBAAM9B,GAAK+B,WA9B7C,MAAA1C,GAAAU,IAAAH,IAAA,aAAA7B,MAAA,WAkCiB,GAAAiE,GAAA/B,IACTC,GAAE,SAAS+B,OAAO,WACdD,EAAKd,KAAOL,OAAOX,EAAE,SAASY,SAElCZ,EAAE,gBAAgB+B,OAAO,WACrBD,EAAKX,OAAOG,EAAIX,OAAOX,EAAE,gBAAgBY,SAE7CZ,EAAE,eAAe+B,OAAO,WACpBD,EAAKf,WAAaf,EAAE,eAAeY,QAEvCZ,EAAE,cAAc+B,OAAO,WACnBD,EAAKpB,UAAYC,OAAOX,EAAE,cAAcY,SAE5CZ,EAAE,cAAc+B,OAAO,WACnBD,EAAKjB,UAAYF,OAAOX,EAAE,cAAcY,SAE5CZ,EAAE,cAAc+B,OAAO,WACnBD,EAAKhB,UAAYH,OAAOX,EAAE,cAAcY,SAE5CZ,EAAED,KAAKE,KAAK+B,IACRC,MAAS,SAACC,GACNJ,EAAKd,MAAQkB,EAAEC,cAAcC,QAEjCC,QAAW,SAACH,GACRJ,EAAKQ,WAAY,GAErBC,UAAa,SAACL,GACVJ,EAAKQ,WAAY,EACjBR,EAAKU,YAAcN,EAAEC,cAAcM,QACnCX,EAAKY,YAAcR,EAAEC,cAAcQ,QACnCb,EAAKc,oBAAsBd,EAAKpB,UAChCoB,EAAKe,oBAAsBf,EAAKjB,WAEpCiC,UAAa,SAACZ,GACVJ,EAAKb,OAASiB,EAAEC,cAAcM,QAC9BX,EAAKZ,OAASgB,EAAEC,cAAcQ,QAE3Bb,EAAKQ,YACJR,EAAKpB,UAAYoB,EAAKc,qBAAuBd,EAAKU,YAAcV,EAAKb,QACrEa,EAAKjB,UAAYiB,EAAKe,qBAAuBf,EAAKY,YAAcZ,EAAKZ,QACrElB,EAAE,cAAcY,IAAIkB,EAAKpB,WACzBV,EAAE,cAAcY,IAAIkB,EAAKjB,kBA3E7CnB,IAAA,OAAA7B,MAAA,WAiFW,GAAAkF,GAAAhD,IACHA,MAAKG,IAAI8C,UAAY,QACrBjD,KAAKG,IAAI+C,SAAS,EAAG,EAAGlD,KAAKE,IAAII,MAAON,KAAKE,IAAIO,QAEjDT,KAAKmD,aACLnD,KAAKoD,UAELvB,sBAAsB,iBAAMmB,GAAKlB,YAxFzCnC,IAAA,UAAA7B,MAAA,WA4FQ,GACIuD,GAAIrB,KAAKkB,OACTI,EAAItB,KAAKmB,MACU,OAApBnB,KAAKgB,aACJK,EAAKrB,KAAKE,IAAII,MAAQ,EAAKN,KAAKkB,OAChCI,EAAKtB,KAAKE,IAAIO,OAAS,EAAKT,KAAKmB,OAErC,IAAII,GAAIvB,KAAKiB,KAETpD,EAAIwF,KAAKC,SACRjC,EAVM,IAUIC,EAVJ,IAUcC,EAVd,MAWNF,EAXM,IAWIC,EAXJ,IAWcC,EAXd,MAYNF,EAZM,IAYIC,EAZJ,IAYcC,EAZd,MAaNF,EAbM,IAaIC,EAbJ,IAacC,EAbd,MAeNF,EAfM,IAeIC,EAfJ,IAecC,EAfd,MAgBNF,EAhBM,IAgBIC,EAhBJ,IAgBcC,EAhBd,MAiBNF,EAjBM,IAiBIC,EAjBJ,IAiBcC,EAjBd,MAkBNF,EAlBM,IAkBIC,EAlBJ,IAkBcC,EAlBd,MAqBX1D,GAAImC,KAAKuD,gBAAgB1F,EAEzB,IAAI8D,GAAS3B,KAAKwD,cAAc3F,GAAG4F,SAEnC5F,GAAImC,KAAK0D,SAAS7F,EAAG8D,EAAQ3B,KAAKW,UAAWX,KAAKc,UAAWd,KAAKe,UAElE,IAAI4C,SACJ,QAAO3D,KAAKgB,YACR,IAAK,IACD2C,EAAI3D,KAAK4D,oBAAoB/F,EAC7B,MAEJ,KAAK,IACD8F,EAAI3D,KAAK6D,mBAAmBhG,EAAG8D,GAIvC3B,KAAKG,IAAI2D,YACT9D,KAAKG,IAAI4D,YAAc,iBACvB/D,KAAKG,IAAI6D,OAAOL,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI+D,SAETlE,KAAKG,IAAI2D,YACT9D,KAAKG,IAAI4D,YAAc,iBACvB/D,KAAKG,IAAI6D,OAAOL,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI+D,SAETlE,KAAKG,IAAI2D,YACT9D,KAAKG,IAAI4D,YAAc,iBACvB/D,KAAKG,IAAI6D,OAAOL,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI+D,SAETlE,KAAKG,IAAI2D,YACT9D,KAAKG,IAAI4D,YAAc,qBACvB/D,KAAKG,IAAI6D,OAAOL,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI8D,OAAON,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9B3D,KAAKG,IAAI+D,YApKjBvE,IAAA,WAAA7B,MAAA,SAwKaD,EAAG8D,EAAQwC,EAAWC,EAAWC,GAEtCF,GAAyBG,KAAKC,GAAK,IACnCH,GAAyBE,KAAKC,GAAK,IACnCF,GAAyBC,KAAKC,GAAK,GAEnC,IAAIC,GAAwBnB,KAAKC,SAC5B,EAAG,EAAG,GAAI3B,EAAO,KACjB,EAAG,EAAG,GAAIA,EAAO,KACjB,EAAG,EAAG,GAAIA,EAAO,KACjB,EAAG,EAAG,EAAG,KAGV8C,EAAsBpB,KAAKC,SAC1B,EAAG,EAAG,EAAG3B,EAAO,KAChB,EAAG,EAAG,EAAGA,EAAO,KAChB,EAAG,EAAG,EAAGA,EAAO,KAChB,EAAG,EAAG,EAAG,KAGV+C,EAAkBrB,KAAKC,SACtB,EAAG,EAAG,EAAG,IACT,EAAGgB,KAAKK,IAAIR,IAAaG,KAAKM,IAAIT,GAAY,IAC9C,EAAGG,KAAKM,IAAIT,GAAYG,KAAKK,IAAIR,GAAY,IAC7C,EAAG,EAAG,EAAG,KAGVU,EAAkBxB,KAAKC,SACtBgB,KAAKK,IAAIP,GAAY,GAAIE,KAAKM,IAAIR,GAAY,IAC9C,EAAG,EAAG,EAAG,IACTE,KAAKM,IAAIR,GAAY,EAAGE,KAAKK,IAAIP,GAAY,IAC7C,EAAG,EAAG,EAAG,KAGVU,EAAkBzB,KAAKC,SACtBgB,KAAKK,IAAIN,IAAaC,KAAKM,IAAIP,GAAY,EAAG,IAC9CC,KAAKM,IAAIP,GAAYC,KAAKK,IAAIN,GAAY,EAAG,IAC7C,EAAG,EAAG,EAAG,IACT,EAAG,EAAG,EAAG,KAGVU,KAzC6CC,GAAA,EAAAC,GAAA,EAAAC,MAAAC,EAAA,KA0CjD,OAAAC,GAAAC,EAAexH,EAAEyH,MAAjBC,OAAAC,cAAAR,GAAAI,EAAAC,EAAAI,QAAAC,MAAAV,GAAA,EAAwB,IAAhBW,GAAgBP,EAAAtH,KACpB6H,GAAMtC,KAAKuC,SAASpB,EAAuBmB,GAC3CA,EAAMtC,KAAKuC,SAASlB,EAAiBiB,GACrCA,EAAMtC,KAAKuC,SAASf,EAAiBc,GACrCA,EAAMtC,KAAKuC,SAASd,EAAiBa,GACrCA,EAAMtC,KAAKuC,SAASnB,EAAqBkB,GACzCZ,EAAKc,KAAKF,IAhDmC,MAAAG,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAK,EAAAU,QAAAV,EAAAU,SAAA,WAAAd,EAAA,KAAAC,IAkDjD,MAAO7B,MAAKC,OAAOyB,MA1N3BpF,IAAA,qBAAA7B,MAAA,SA6NuBkI,EAAUrE,GACzB,GAAI5D,GAAIiC,KAAKoB,OAAOG,EAEhB0E,EAAIlI,EAAI4D,EAAO,GAGf8C,GAFuB9C,EAAO,GAAQA,EAAO,GAEvB0B,KAAKC,SAC1B,EAAG,EAAGtD,KAAKE,IAAII,MAAQ,IACvB,EAAG,EAAGN,KAAKE,IAAIO,OAAS,IACxB,EAAG,EAAG,MAKPyF,KAd6BC,GAAA,EAAAC,GAAA,EAAAC,MAAAlB,EAAA,KAejC,OAAAmB,GAAAC,EAAeP,EAASV,MAAxBC,OAAAC,cAAAW,GAAAG,EAAAC,EAAAd,QAAAC,MAAAS,GAAA,EAA+B,IAAvBR,GAAuBW,EAAAxI,MAGvBuD,EAAItD,GAAK4H,EAAI,GAAKA,EAAI,IACtBrE,EAAIvD,GAAK4H,EAAI,GAAKA,EAAI,GAC1BA,GAAMtC,KAAKC,QAAQjC,EAAGC,EAAG,IACzBqE,EAAMtC,KAAKuC,SAASnB,EAAqBkB,GASzCO,EAAGL,MAAMF,EAAIL,MAAM,GAAIK,EAAIL,MAAM,MA9BJ,MAAAQ,GAAAM,GAAA,EAAAC,EAAAP,EAAA,aAAAK,GAAAI,EAAAR,QAAAQ,EAAAR,SAAA,WAAAK,EAAA,KAAAC,IAgCjC,MAAOH,MA7PfvG,IAAA,sBAAA7B,MAAA,SAgQwBkI,GAChB,GAAIE,MADsBM,GAAA,EAAAC,GAAA,EAAAC,MAAAvB,EAAA,KAE1B,OAAAwB,GAAAC,EAAaZ,EAASV,MAAtBC,OAAAC,cAAAgB,GAAAG,EAAAC,EAAAnB,QAAAC,MAAAc,GAAA,EAA6B,IAArB7C,GAAqBgD,EAAA7I,KACzBoI,GAAGL,MAAMlC,EAAE,GAAIA,EAAE,MAHK,MAAAmC,GAAAW,GAAA,EAAAC,EAAAZ,EAAA,aAAAU,GAAAI,EAAAb,QAAAa,EAAAb,SAAA,WAAAU,EAAA,KAAAC,IAK1B,MAAOR,MArQfvG,IAAA,aAAA7B,MAAA,WAyQQ,GACIuD,GAAIrB,KAAKkB,OAAS2F,IAClBvF,EAAItB,KAAKmB,OAAS0F,IAElBhJ,EAAIwF,KAAKC,SACRjC,EAAGC,IACHD,EANM,IAMIC,IACVD,EAPM,IAOIC,EAPJ,MAQND,EAAGC,EARG,MAWXzD,GAAImC,KAAKuD,gBAAgB1F,GAGzBA,EAAImC,KAAK8G,SAASjJ,EAAGmC,KAAKW,WAAW8C,UAErCzD,KAAKG,IAAI8C,UAAY,qBACrBjD,KAAKG,IAAI2D,YACT9D,KAAKG,IAAI6D,OAAOnG,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9BmC,KAAKG,IAAI8D,OAAOpG,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9BmC,KAAKG,IAAI8D,OAAOpG,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9BmC,KAAKG,IAAI8D,OAAOpG,EAAE,GAAG,GAAIA,EAAE,GAAG,IAC9BmC,KAAKG,IAAI4G,YACT/G,KAAKG,IAAI6G,UAhSjBrH,IAAA,kBAAA7B,MAAA,SAmSoBD,GAGZ,MADAA,GAAEoJ,QAAQpJ,EAAEgJ,OAAO,GAAIhJ,EAAEgJ,OAAO,GAAG,GAAI,GAChChJ,KAtSf8B,IAAA,WAAA7B,MAAA,SA+SaD,EAAGqJ,GAERA,GAAiB5C,KAAKC,GAAK,GAE3B,IAAI5C,GAAS3B,KAAKmH,cAActJ,GAAG4F,UAE/B2D,EAAiB/D,KAAKC,SACrBgB,KAAKK,IAAIuC,IAAS5C,KAAKM,IAAIsC,GAAQ,IACnC5C,KAAKM,IAAIsC,GAAQ5C,KAAKK,IAAIuC,GAAQ,IAClC,EAAG,EAAG,KAEP1C,EAAwBnB,KAAKC,SAC5B,EAAG,GAAI3B,EAAO,KACd,EAAG,GAAIA,EAAO,KACd,EAAG,EAAG,KAEP8C,EAAsBpB,KAAKC,SAC1B,EAAG,EAAG3B,EAAO,KACb,EAAG,EAAGA,EAAO,KACb,EAAG,EAAG,KAGPoD,KAtBWsC,GAAA,EAAAC,GAAA,EAAAC,MAAApC,EAAA,KAuBf,OAAAqC,GAAAC,EAAe5J,EAAEyH,MAAjBC,OAAAC,cAAA6B,GAAAG,EAAAC,EAAAhC,QAAAC,MAAA2B,GAAA,EAAwB,IAAhB1B,GAAgB6B,EAAA1J,MAChB4J,EAAMrE,KAAKuC,SAASpB,EAAuBmB,GAC3CgC,EAAKtE,KAAKuC,SAASwB,EAAgBM,GACnCE,EAAMvE,KAAKuC,SAASnB,EAAqBkD,EAC7C5C,GAAKc,KAAK+B,IA3BC,MAAA9B,GAAAwB,GAAA,EAAAC,EAAAzB,EAAA,aAAAuB,GAAAI,EAAA1B,QAAA0B,EAAA1B,SAAA,WAAAuB,EAAA,KAAAC,IA6Bf,MAAOlE,MAAKC,OAAOyB,MA5U3BpF,IAAA,gBAAA7B,MAAA,SA+UkB+J,GACV,GAAIxG,GAAI,EAAGC,EAAI,EADEwG,GAAA,EAAAC,GAAA,EAAAC,MAAA7C,EAAA,KAEjB,OAAA8C,GAAAC,EAAaL,EAAOvC,MAApBC,OAAAC,cAAAsC,GAAAG,EAAAC,EAAAzC,QAAAC,MAAAoC,GAAA,EAA2B,IAAnBhJ,GAAmBmJ,EAAAnK,KACvBuD,IAAKvC,EAAE,GACPwC,GAAKxC,EAAE,IAJM,MAAAgH,GAAAiC,GAAA,EAAAC,EAAAlC,EAAA,aAAAgC,GAAAI,EAAAnC,QAAAmC,EAAAnC,SAAA,WAAAgC,EAAA,KAAAC,IAMjB,MAAO3E,MAAKC,QAAQjC,EAAIwG,EAAOvC,MAAM9F,OAAQ8B,EAAIuG,EAAOvC,MAAM9F,YArVtEG,IAAA,gBAAA7B,MAAA,SAwVkB+J,GACV,GAAIxG,GAAI,EAAGC,EAAI,EAAGC,EAAI,EADL4G,GAAA,EAAAC,GAAA,EAAAC,MAAAlD,EAAA,KAEjB,OAAAmD,GAAAC,EAAaV,EAAOvC,MAApBC,OAAAC,cAAA2C,GAAAG,EAAAC,EAAA9C,QAAAC,MAAAyC,GAAA,EAA2B,IAAnBrJ,GAAmBwJ,EAAAxK,KACvBuD,IAAKvC,EAAE,GACPwC,GAAKxC,EAAE,GACPyC,GAAKzC,EAAE,IALM,MAAAgH,GAAAsC,GAAA,EAAAC,EAAAvC,EAAA,aAAAqC,GAAAI,EAAAxC,QAAAwC,EAAAxC,SAAA,WAAAqC,EAAA,KAAAC,IAOjB,MAAOhF,MAAKC,QACRjC,EAAIwG,EAAOvC,MAAM9F,OACjB8B,EAAIuG,EAAOvC,MAAM9F,OACjB+B,EAAIsG,EAAOvC,MAAM9F,aAlW7BM,OF4hBM,SAAUtC,EAAQD,EAASH,GAEjCI,EAAOD,QAAUH,EAAoB","file":"./dist/projective_geometry/Project.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nnew (function () {\n    function Project() {\n        var _this = this;\n\n        _classCallCheck(this, Project);\n\n        $(function () {\n            _this.can = $(\"#geometry_canvas\")[0];\n            _this.ctx = _this.can.getContext('2d', { alpha: false });\n            _this.can.width = window.innerWidth;\n            _this.can.height = window.innerHeight;\n            _this.rotationX = Number($(\"#rotationx\").val());\n            _this.rotationY = Number($(\"#rotationy\").val());\n            _this.rotationZ = Number($(\"#rotationz\").val());\n            _this.projection = $(\"#projection\").val();\n            _this.boxZ = Number($(\"#boxz\").val());\n            _this.mouseX = _this.can.width / 2;\n            _this.mouseY = _this.can.height / 2;\n            _this.camera = {\n                x: 0,\n                y: 0,\n                z: Number($(\"#focallength\").val()),\n                rx: 0,\n                ry: 0,\n                rz: 0,\n                width: _this.can.width,\n                height: _this.can.height,\n                center: {\n                    x: _this.can.width / 2,\n                    y: _this.can.height / 2\n                }\n            };\n            _this.bindEvents();\n            requestAnimationFrame(function () {\n                return _this.draw();\n            });\n        });\n    }\n\n    _createClass(Project, [{\n        key: \"bindEvents\",\n        value: function bindEvents() {\n            var _this2 = this;\n\n            $(\"#boxz\").change(function () {\n                _this2.boxZ = Number($(\"#boxz\").val());\n            });\n            $(\"#focallength\").change(function () {\n                _this2.camera.z = Number($(\"#focallength\").val());\n            });\n            $(\"#projection\").change(function () {\n                _this2.projection = $(\"#projection\").val();\n            });\n            $(\"#rotationx\").change(function () {\n                _this2.rotationX = Number($(\"#rotationx\").val());\n            });\n            $(\"#rotationy\").change(function () {\n                _this2.rotationY = Number($(\"#rotationy\").val());\n            });\n            $(\"#rotationz\").change(function () {\n                _this2.rotationZ = Number($(\"#rotationz\").val());\n            });\n            $(this.can).on({\n                \"wheel\": function wheel(e) {\n                    _this2.boxZ += e.originalEvent.deltaY;\n                },\n                \"mouseup\": function mouseup(e) {\n                    _this2.mouseDown = false;\n                },\n                \"mousedown\": function mousedown(e) {\n                    _this2.mouseDown = true;\n                    _this2.mouseStartX = e.originalEvent.clientX;\n                    _this2.mouseStartY = e.originalEvent.clientY;\n                    _this2.mouseStartRotationX = _this2.rotationX;\n                    _this2.mouseStartRotationY = _this2.rotationY;\n                },\n                \"mousemove\": function mousemove(e) {\n                    _this2.mouseX = e.originalEvent.clientX;\n                    _this2.mouseY = e.originalEvent.clientY;\n\n                    if (_this2.mouseDown) {\n                        _this2.rotationX = _this2.mouseStartRotationX + (_this2.mouseStartX - _this2.mouseX);\n                        _this2.rotationY = _this2.mouseStartRotationY + (_this2.mouseStartY - _this2.mouseY);\n                        $(\"#rotationx\").val(_this2.rotationX);\n                        $(\"#rotationy\").val(_this2.rotationY);\n                    }\n                }\n            });\n        }\n    }, {\n        key: \"draw\",\n        value: function draw() {\n            var _this3 = this;\n\n            this.ctx.fillStyle = \"black\";\n            this.ctx.fillRect(0, 0, this.can.width, this.can.height);\n\n            this.drawSquare();\n            this.drawBox();\n\n            requestAnimationFrame(function () {\n                return _this3.draw();\n            });\n        }\n    }, {\n        key: \"drawBox\",\n        value: function drawBox() {\n            var size = 200;\n            var x = this.mouseX;\n            var y = this.mouseY;\n            if (this.projection === \"p\") {\n                x = this.can.width / 2 - this.mouseX;\n                y = this.can.height / 2 - this.mouseY;\n            }\n            var z = this.boxZ;\n\n            var c = math.matrix([[x - size, y - size, z - size], [x + size, y - size, z - size], [x + size, y + size, z - size], [x - size, y + size, z - size], [x - size, y - size, z + size], [x + size, y - size, z + size], [x + size, y + size, z + size], [x - size, y + size, z + size]]);\n\n            c = this.makeHomogeneous(c);\n            //find our centroid for the translation matrix\n            var center = this.getCentroid3d(c).toArray();\n\n            c = this.rotate3d(c, center, this.rotationX, this.rotationY, this.rotationZ);\n\n            var v = void 0;\n            switch (this.projection) {\n                case \"o\":\n                    v = this.projectOrthographic(c);\n                    break;\n\n                case \"p\":\n                    v = this.projectPerspective(c, center);\n                    break;\n            }\n\n            this.ctx.beginPath();\n            this.ctx.strokeStyle = \"rgb(255, 0, 0)\";\n            this.ctx.moveTo(v[0][0], v[0][1]);\n            this.ctx.lineTo(v[1][0], v[1][1]);\n            this.ctx.lineTo(v[2][0], v[2][1]);\n            this.ctx.lineTo(v[3][0], v[3][1]);\n            this.ctx.lineTo(v[0][0], v[0][1]);\n            this.ctx.stroke();\n\n            this.ctx.beginPath();\n            this.ctx.strokeStyle = \"rgb(0, 255, 0)\";\n            this.ctx.moveTo(v[4][0], v[4][1]);\n            this.ctx.lineTo(v[5][0], v[5][1]);\n            this.ctx.lineTo(v[6][0], v[6][1]);\n            this.ctx.lineTo(v[7][0], v[7][1]);\n            this.ctx.lineTo(v[4][0], v[4][1]);\n            this.ctx.stroke();\n\n            this.ctx.beginPath();\n            this.ctx.strokeStyle = \"rgb(0, 0, 255)\";\n            this.ctx.moveTo(v[0][0], v[0][1]);\n            this.ctx.lineTo(v[4][0], v[4][1]);\n            this.ctx.lineTo(v[7][0], v[7][1]);\n            this.ctx.lineTo(v[3][0], v[3][1]);\n            this.ctx.lineTo(v[0][0], v[0][1]);\n            this.ctx.stroke();\n\n            this.ctx.beginPath();\n            this.ctx.strokeStyle = \"rgb(255, 255, 255)\";\n            this.ctx.moveTo(v[1][0], v[1][1]);\n            this.ctx.lineTo(v[5][0], v[5][1]);\n            this.ctx.lineTo(v[6][0], v[6][1]);\n            this.ctx.lineTo(v[2][0], v[2][1]);\n            this.ctx.lineTo(v[1][0], v[1][1]);\n            this.ctx.stroke();\n        }\n    }, {\n        key: \"rotate3d\",\n        value: function rotate3d(c, center, xRotation, yRotation, zRotation) {\n            //change theta into radians\n            xRotation = xRotation * (Math.PI / 180);\n            yRotation = yRotation * (Math.PI / 180);\n            zRotation = zRotation * (Math.PI / 180);\n\n            var translateCenterMatrix = math.matrix([[1, 0, 0, -center[0]], [0, 1, 0, -center[1]], [0, 0, 1, -center[2]], [0, 0, 0, 1]]);\n\n            var translateBackMatrix = math.matrix([[1, 0, 0, center[0]], [0, 1, 0, center[1]], [0, 0, 1, center[2]], [0, 0, 0, 1]]);\n\n            var xRotationMatrix = math.matrix([[1, 0, 0, 0], [0, Math.cos(xRotation), -Math.sin(xRotation), 0], [0, Math.sin(xRotation), Math.cos(xRotation), 0], [0, 0, 0, 1]]);\n\n            var yRotationMatrix = math.matrix([[Math.cos(yRotation), 0, -Math.sin(yRotation), 0], [0, 1, 0, 0], [Math.sin(yRotation), 0, Math.cos(yRotation), 0], [0, 0, 0, 1]]);\n\n            var zRotationMatrix = math.matrix([[Math.cos(zRotation), -Math.sin(zRotation), 0, 0], [Math.sin(zRotation), Math.cos(zRotation), 0, 0], [0, 0, 1, 0], [0, 0, 0, 1]]);\n\n            var newc = [];\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = c._data[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var row = _step.value;\n\n                    row = math.multiply(translateCenterMatrix, row);\n                    row = math.multiply(xRotationMatrix, row);\n                    row = math.multiply(yRotationMatrix, row);\n                    row = math.multiply(zRotationMatrix, row);\n                    row = math.multiply(translateBackMatrix, row);\n                    newc.push(row);\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return math.matrix(newc);\n        }\n    }, {\n        key: \"projectPerspective\",\n        value: function projectPerspective(vertexes, center) {\n            var d = this.camera.z;\n\n            var r = d / center[1];\n            var projectedCenter = [r * center[0], r * center[2], 1];\n\n            var translateBackMatrix = math.matrix([[1, 0, this.can.width / 2], [0, 1, this.can.height / 2], [0, 0, 1]]);\n\n            var vs = [];\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = vertexes._data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var row = _step2.value;\n\n                    // row = math.multiply(projectionMatrix, row);\n                    // row = math.multiply(translateCenterMatrix, row);\n                    var x = d * (row[0] / row[2]);\n                    var y = d * (row[1] / row[2]);\n                    row = math.matrix([x, y, 1]);\n                    row = math.multiply(translateBackMatrix, row);\n\n                    // let r = d / row[1];\n                    // row = math.matrix([\n                    //     r * row[0],\n                    //     r * row[2],\n                    //     1\n                    // ]);\n                    // row = math.multiply(translateBackMatrix, row);\n                    vs.push([row._data[0], row._data[1]]);\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            return vs;\n        }\n    }, {\n        key: \"projectOrthographic\",\n        value: function projectOrthographic(vertexes) {\n            var vs = [];\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _iterator3 = vertexes._data[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var v = _step3.value;\n\n                    vs.push([v[0], v[1]]);\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                        _iterator3.return();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n\n            return vs;\n        }\n    }, {\n        key: \"drawSquare\",\n        value: function drawSquare() {\n            var size = 200;\n            var x = this.mouseX - size / 2;\n            var y = this.mouseY - size / 2;\n\n            var c = math.matrix([[x, y], [x + size, y], [x + size, y + size], [x, y + size]]);\n\n            c = this.makeHomogeneous(c);\n\n            c = this.rotate2d(c, this.rotationX).toArray();\n\n            this.ctx.fillStyle = \"rgb(255, 255, 255)\";\n            this.ctx.beginPath();\n            this.ctx.moveTo(c[0][0], c[0][1]);\n            this.ctx.lineTo(c[1][0], c[1][1]);\n            this.ctx.lineTo(c[2][0], c[2][1]);\n            this.ctx.lineTo(c[3][0], c[3][1]);\n            this.ctx.closePath();\n            this.ctx.fill();\n        }\n    }, {\n        key: \"makeHomogeneous\",\n        value: function makeHomogeneous(c) {\n            //Transform coordinate into homogeneous coordinate\n            c.resize([c.size()[0], c.size()[1] + 1], 1);\n            return c;\n        }\n\n        /**\n         *\n         * @param {DenseMatrix} c\n         * @param theta\n         * @returns {DenseMatrix}\n         */\n\n    }, {\n        key: \"rotate2d\",\n        value: function rotate2d(c, theta) {\n            //change theta into radians\n            theta = theta * (Math.PI / 180);\n            //find our centroid for the translation matrix\n            var center = this.getCentroid2d(c).toArray();\n\n            var rotationMatrix = math.matrix([[Math.cos(theta), -Math.sin(theta), 0], [Math.sin(theta), Math.cos(theta), 0], [0, 0, 1]]);\n            var translateCenterMatrix = math.matrix([[1, 0, -center[0]], [0, 1, -center[1]], [0, 0, 1]]);\n            var translateBackMatrix = math.matrix([[1, 0, center[0]], [0, 1, center[1]], [0, 0, 1]]);\n\n            var newc = [];\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = c._data[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var row = _step4.value;\n\n                    var tcm = math.multiply(translateCenterMatrix, row);\n                    var rm = math.multiply(rotationMatrix, tcm);\n                    var tbm = math.multiply(translateBackMatrix, rm);\n                    newc.push(tbm);\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            return math.matrix(newc);\n        }\n    }, {\n        key: \"getCentroid2d\",\n        value: function getCentroid2d(points) {\n            var x = 0,\n                y = 0;\n            var _iteratorNormalCompletion5 = true;\n            var _didIteratorError5 = false;\n            var _iteratorError5 = undefined;\n\n            try {\n                for (var _iterator5 = points._data[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                    var p = _step5.value;\n\n                    x += p[0];\n                    y += p[1];\n                }\n            } catch (err) {\n                _didIteratorError5 = true;\n                _iteratorError5 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                        _iterator5.return();\n                    }\n                } finally {\n                    if (_didIteratorError5) {\n                        throw _iteratorError5;\n                    }\n                }\n            }\n\n            return math.matrix([x / points._data.length, y / points._data.length]);\n        }\n    }, {\n        key: \"getCentroid3d\",\n        value: function getCentroid3d(points) {\n            var x = 0,\n                y = 0,\n                z = 0;\n            var _iteratorNormalCompletion6 = true;\n            var _didIteratorError6 = false;\n            var _iteratorError6 = undefined;\n\n            try {\n                for (var _iterator6 = points._data[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n                    var p = _step6.value;\n\n                    x += p[0];\n                    y += p[1];\n                    z += p[2];\n                }\n            } catch (err) {\n                _didIteratorError6 = true;\n                _iteratorError6 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion6 && _iterator6.return) {\n                        _iterator6.return();\n                    }\n                } finally {\n                    if (_didIteratorError6) {\n                        throw _iteratorError6;\n                    }\n                }\n            }\n\n            return math.matrix([x / points._data.length, y / points._data.length, z / points._data.length]);\n        }\n    }]);\n\n    return Project;\n}())();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyY1xccHJvamVjdGl2ZV9nZW9tZXRyeVxcUHJvamVjdC5lczYiXSwibmFtZXMiOlsiJCIsImNhbiIsImN0eCIsImdldENvbnRleHQiLCJhbHBoYSIsIndpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImhlaWdodCIsImlubmVySGVpZ2h0Iiwicm90YXRpb25YIiwiTnVtYmVyIiwidmFsIiwicm90YXRpb25ZIiwicm90YXRpb25aIiwicHJvamVjdGlvbiIsImJveFoiLCJtb3VzZVgiLCJtb3VzZVkiLCJjYW1lcmEiLCJ4IiwieSIsInoiLCJyeCIsInJ5IiwicnoiLCJjZW50ZXIiLCJiaW5kRXZlbnRzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiZHJhdyIsImNoYW5nZSIsIm9uIiwiZSIsIm9yaWdpbmFsRXZlbnQiLCJkZWx0YVkiLCJtb3VzZURvd24iLCJtb3VzZVN0YXJ0WCIsImNsaWVudFgiLCJtb3VzZVN0YXJ0WSIsImNsaWVudFkiLCJtb3VzZVN0YXJ0Um90YXRpb25YIiwibW91c2VTdGFydFJvdGF0aW9uWSIsImZpbGxTdHlsZSIsImZpbGxSZWN0IiwiZHJhd1NxdWFyZSIsImRyYXdCb3giLCJzaXplIiwiYyIsIm1hdGgiLCJtYXRyaXgiLCJtYWtlSG9tb2dlbmVvdXMiLCJnZXRDZW50cm9pZDNkIiwidG9BcnJheSIsInJvdGF0ZTNkIiwidiIsInByb2plY3RPcnRob2dyYXBoaWMiLCJwcm9qZWN0UGVyc3BlY3RpdmUiLCJiZWdpblBhdGgiLCJzdHJva2VTdHlsZSIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsInhSb3RhdGlvbiIsInlSb3RhdGlvbiIsInpSb3RhdGlvbiIsIk1hdGgiLCJQSSIsInRyYW5zbGF0ZUNlbnRlck1hdHJpeCIsInRyYW5zbGF0ZUJhY2tNYXRyaXgiLCJ4Um90YXRpb25NYXRyaXgiLCJjb3MiLCJzaW4iLCJ5Um90YXRpb25NYXRyaXgiLCJ6Um90YXRpb25NYXRyaXgiLCJuZXdjIiwiX2RhdGEiLCJyb3ciLCJtdWx0aXBseSIsInB1c2giLCJ2ZXJ0ZXhlcyIsImQiLCJyIiwicHJvamVjdGVkQ2VudGVyIiwidnMiLCJyb3RhdGUyZCIsImNsb3NlUGF0aCIsImZpbGwiLCJyZXNpemUiLCJ0aGV0YSIsImdldENlbnRyb2lkMmQiLCJyb3RhdGlvbk1hdHJpeCIsInRjbSIsInJtIiwidGJtIiwicG9pbnRzIiwicCIsImxlbmd0aCJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFFSSx1QkFBYztBQUFBOztBQUFBOztBQUNWQSxVQUFFLFlBQU07QUFDSixrQkFBS0MsR0FBTCxHQUFXRCxFQUFFLGtCQUFGLEVBQXNCLENBQXRCLENBQVg7QUFDQSxrQkFBS0UsR0FBTCxHQUFXLE1BQUtELEdBQUwsQ0FBU0UsVUFBVCxDQUFvQixJQUFwQixFQUEwQixFQUFDQyxPQUFPLEtBQVIsRUFBMUIsQ0FBWDtBQUNBLGtCQUFLSCxHQUFMLENBQVNJLEtBQVQsR0FBaUJDLE9BQU9DLFVBQXhCO0FBQ0Esa0JBQUtOLEdBQUwsQ0FBU08sTUFBVCxHQUFrQkYsT0FBT0csV0FBekI7QUFDQSxrQkFBS0MsU0FBTCxHQUFpQkMsT0FBT1gsRUFBRSxZQUFGLEVBQWdCWSxHQUFoQixFQUFQLENBQWpCO0FBQ0Esa0JBQUtDLFNBQUwsR0FBaUJGLE9BQU9YLEVBQUUsWUFBRixFQUFnQlksR0FBaEIsRUFBUCxDQUFqQjtBQUNBLGtCQUFLRSxTQUFMLEdBQWlCSCxPQUFPWCxFQUFFLFlBQUYsRUFBZ0JZLEdBQWhCLEVBQVAsQ0FBakI7QUFDQSxrQkFBS0csVUFBTCxHQUFrQmYsRUFBRSxhQUFGLEVBQWlCWSxHQUFqQixFQUFsQjtBQUNBLGtCQUFLSSxJQUFMLEdBQVlMLE9BQU9YLEVBQUUsT0FBRixFQUFXWSxHQUFYLEVBQVAsQ0FBWjtBQUNBLGtCQUFLSyxNQUFMLEdBQWMsTUFBS2hCLEdBQUwsQ0FBU0ksS0FBVCxHQUFpQixDQUEvQjtBQUNBLGtCQUFLYSxNQUFMLEdBQWMsTUFBS2pCLEdBQUwsQ0FBU08sTUFBVCxHQUFrQixDQUFoQztBQUNBLGtC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QUE7O0FBTWpCLG1CQUFPL0MsS0FBS0MsTUFBTCxDQUFZLENBQUM3QixJQUFJMEUsT0FBT25CLEtBQVAsQ0FBYXFCLE1BQWxCLEVBQTBCM0UsSUFBSXlFLE9BQU9uQixLQUFQLENBQWFxQixNQUEzQyxDQUFaLENBQVA7QUFDSDtBQXRWTDtBQUFBO0FBQUEsc0NBd1ZrQkYsTUF4VmxCLEVBd1Z5QjtBQUNqQixnQkFBSTFFLElBQUksQ0FBUjtBQUFBLGdCQUFXQyxJQUFJLENBQWY7QUFBQSxnQkFBa0JDLElBQUksQ0FBdEI7QUFEaUI7QUFBQTtBQUFBOztBQUFBO0FBRWpCLHNDQUFhd0UsT0FBT25CLEtBQXBCLG1JQUEyQjtBQUFBLHdCQUFuQm9CLENBQW1COztBQUN2QjNFLHlCQUFLMkUsRUFBRSxDQUFGLENBQUw7QUFDQTFFLHlCQUFLMEUsRUFBRSxDQUFGLENBQUw7QUFDQXpFLHlCQUFLeUUsRUFBRSxDQUFGLENBQUw7QUFDSDtBQU5nQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQU9qQixtQkFBTy9DLEtBQUtDLE1BQUwsQ0FBWSxDQUNmN0IsSUFBSTBFLE9BQU9uQixLQUFQLENBQWFxQixNQURGLEVBRWYzRSxJQUFJeUUsT0FBT25CLEtBQVAsQ0FBYXFCLE1BRkYsRUFHZjFFLElBQUl3RSxPQUFPbkIsS0FBUCxDQUFhcUIsTUFIRixDQUFaLENBQVA7QUFLSDtBQXBXTDs7QUFBQTtBQUFBIiwiZmlsZSI6IlByb2plY3QuZXM2Iiwic291cmNlUm9vdCI6IkM6L1VzZXJzL3JpY2gvUGhwc3Rvcm1Qcm9qZWN0cy9qc2FsZ29zIiwic291cmNlc0NvbnRlbnQiOlsibmV3IGNsYXNzIFByb2plY3Qge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW4gPSAkKFwiI2dlb21ldHJ5X2NhbnZhc1wiKVswXTtcbiAgICAgICAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW4uZ2V0Q29udGV4dCgnMmQnLCB7YWxwaGE6IGZhbHNlfSk7XG4gICAgICAgICAgICB0aGlzLmNhbi53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICAgICAgdGhpcy5jYW4uaGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblggPSBOdW1iZXIoJChcIiNyb3RhdGlvbnhcIikudmFsKCkpO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblkgPSBOdW1iZXIoJChcIiNyb3RhdGlvbnlcIikudmFsKCkpO1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblogPSBOdW1iZXIoJChcIiNyb3RhdGlvbnpcIikudmFsKCkpO1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0aW9uID0gJChcIiNwcm9qZWN0aW9uXCIpLnZhbCgpO1xuICAgICAgICAgICAgdGhpcy5ib3haID0gTnVtYmVyKCQoXCIjYm94elwiKS52YWwoKSk7XG4gICAgICAgICAgICB0aGlzLm1vdXNlWCA9IHRoaXMuY2FuLndpZHRoIC8gMjtcbiAgICAgICAgICAgIHRoaXMubW91c2VZID0gdGhpcy5jYW4uaGVpZ2h0IC8gMjtcbiAgICAgICAgICAgIHRoaXMuY2FtZXJhID0ge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgeTogMCxcbiAgICAgICAgICAgICAgICB6OiBOdW1iZXIoJChcIiNmb2NhbGxlbmd0aFwiKS52YWwoKSksXG4gICAgICAgICAgICAgICAgcng6IDAsXG4gICAgICAgICAgICAgICAgcnk6IDAsXG4gICAgICAgICAgICAgICAgcno6IDAsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuY2FuLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogdGhpcy5jYW4uaGVpZ2h0LFxuICAgICAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgICAgICB4OiB0aGlzLmNhbi53aWR0aCAvIDIsXG4gICAgICAgICAgICAgICAgICAgIHk6IHRoaXMuY2FuLmhlaWdodCAvIDJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5iaW5kRXZlbnRzKCk7XG4gICAgICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3KCkpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBiaW5kRXZlbnRzKCkge1xuICAgICAgICAkKFwiI2JveHpcIikuY2hhbmdlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYm94WiA9IE51bWJlcigkKFwiI2JveHpcIikudmFsKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIiNmb2NhbGxlbmd0aFwiKS5jaGFuZ2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jYW1lcmEueiA9IE51bWJlcigkKFwiI2ZvY2FsbGVuZ3RoXCIpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIjcHJvamVjdGlvblwiKS5jaGFuZ2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5wcm9qZWN0aW9uID0gJChcIiNwcm9qZWN0aW9uXCIpLnZhbCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIiNyb3RhdGlvbnhcIikuY2hhbmdlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucm90YXRpb25YID0gTnVtYmVyKCQoXCIjcm90YXRpb254XCIpLnZhbCgpKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIjcm90YXRpb255XCIpLmNoYW5nZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJvdGF0aW9uWSA9IE51bWJlcigkKFwiI3JvdGF0aW9ueVwiKS52YWwoKSk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiI3JvdGF0aW9uelwiKS5jaGFuZ2UoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yb3RhdGlvblogPSBOdW1iZXIoJChcIiNyb3RhdGlvbnpcIikudmFsKCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgJCh0aGlzLmNhbikub24oe1xuICAgICAgICAgICAgXCJ3aGVlbFwiOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYm94WiArPSBlLm9yaWdpbmFsRXZlbnQuZGVsdGFZO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibW91c2V1cFwiOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtb3VzZWRvd25cIjogKGUpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlRG93biA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZVN0YXJ0WCA9IGUub3JpZ2luYWxFdmVudC5jbGllbnRYO1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VTdGFydFkgPSBlLm9yaWdpbmFsRXZlbnQuY2xpZW50WTtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlU3RhcnRSb3RhdGlvblggPSB0aGlzLnJvdGF0aW9uWDtcbiAgICAgICAgICAgICAgICB0aGlzLm1vdXNlU3RhcnRSb3RhdGlvblkgPSB0aGlzLnJvdGF0aW9uWTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1vdXNlbW92ZVwiOiAoZSkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMubW91c2VYID0gZS5vcmlnaW5hbEV2ZW50LmNsaWVudFg7XG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZVkgPSBlLm9yaWdpbmFsRXZlbnQuY2xpZW50WTtcblxuICAgICAgICAgICAgICAgIGlmKHRoaXMubW91c2VEb3duKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb25YID0gdGhpcy5tb3VzZVN0YXJ0Um90YXRpb25YICsgKHRoaXMubW91c2VTdGFydFggLSB0aGlzLm1vdXNlWCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucm90YXRpb25ZID0gdGhpcy5tb3VzZVN0YXJ0Um90YXRpb25ZICsgKHRoaXMubW91c2VTdGFydFkgLSB0aGlzLm1vdXNlWSk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjcm90YXRpb254XCIpLnZhbCh0aGlzLnJvdGF0aW9uWCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIjcm90YXRpb255XCIpLnZhbCh0aGlzLnJvdGF0aW9uWSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkcmF3KCkge1xuICAgICAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBcImJsYWNrXCI7XG4gICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMuY2FuLndpZHRoLCB0aGlzLmNhbi5oZWlnaHQpO1xuXG4gICAgICAgIHRoaXMuZHJhd1NxdWFyZSgpO1xuICAgICAgICB0aGlzLmRyYXdCb3goKTtcblxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5kcmF3KCkpO1xuICAgIH1cblxuICAgIGRyYXdCb3goKSB7XG4gICAgICAgIGxldCBzaXplID0gMjAwO1xuICAgICAgICBsZXQgeCA9IHRoaXMubW91c2VYO1xuICAgICAgICBsZXQgeSA9IHRoaXMubW91c2VZO1xuICAgICAgICBpZih0aGlzLnByb2plY3Rpb24gPT09IFwicFwiKSB7XG4gICAgICAgICAgICB4ID0gKHRoaXMuY2FuLndpZHRoIC8gMikgLSB0aGlzLm1vdXNlWDtcbiAgICAgICAgICAgIHkgPSAodGhpcy5jYW4uaGVpZ2h0IC8gMikgLSB0aGlzLm1vdXNlWTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgeiA9IHRoaXMuYm94WjtcblxuICAgICAgICBsZXQgYyA9IG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIFt4IC0gc2l6ZSwgeSAtIHNpemUsIHogLSBzaXplXSxcbiAgICAgICAgICAgIFt4ICsgc2l6ZSwgeSAtIHNpemUsIHogLSBzaXplXSxcbiAgICAgICAgICAgIFt4ICsgc2l6ZSwgeSArIHNpemUsIHogLSBzaXplXSxcbiAgICAgICAgICAgIFt4IC0gc2l6ZSwgeSArIHNpemUsIHogLSBzaXplXSxcblxuICAgICAgICAgICAgW3ggLSBzaXplLCB5IC0gc2l6ZSwgeiArIHNpemVdLFxuICAgICAgICAgICAgW3ggKyBzaXplLCB5IC0gc2l6ZSwgeiArIHNpemVdLFxuICAgICAgICAgICAgW3ggKyBzaXplLCB5ICsgc2l6ZSwgeiArIHNpemVdLFxuICAgICAgICAgICAgW3ggLSBzaXplLCB5ICsgc2l6ZSwgeiArIHNpemVdXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGMgPSB0aGlzLm1ha2VIb21vZ2VuZW91cyhjKTtcbiAgICAgICAgLy9maW5kIG91ciBjZW50cm9pZCBmb3IgdGhlIHRyYW5zbGF0aW9uIG1hdHJpeFxuICAgICAgICBsZXQgY2VudGVyID0gdGhpcy5nZXRDZW50cm9pZDNkKGMpLnRvQXJyYXkoKTtcblxuICAgICAgICBjID0gdGhpcy5yb3RhdGUzZChjLCBjZW50ZXIsIHRoaXMucm90YXRpb25YLCB0aGlzLnJvdGF0aW9uWSwgdGhpcy5yb3RhdGlvblopO1xuXG4gICAgICAgIGxldCB2O1xuICAgICAgICBzd2l0Y2godGhpcy5wcm9qZWN0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIFwib1wiOlxuICAgICAgICAgICAgICAgIHYgPSB0aGlzLnByb2plY3RPcnRob2dyYXBoaWMoYyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgIGNhc2UgXCJwXCI6XG4gICAgICAgICAgICAgICAgdiA9IHRoaXMucHJvamVjdFBlcnNwZWN0aXZlKGMsIGNlbnRlcik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYigyNTUsIDAsIDApXCI7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh2WzBdWzBdLCB2WzBdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbMV1bMF0sIHZbMV1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odlsyXVswXSwgdlsyXVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh2WzNdWzBdLCB2WzNdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbMF1bMF0sIHZbMF1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYigwLCAyNTUsIDApXCI7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh2WzRdWzBdLCB2WzRdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbNV1bMF0sIHZbNV1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odls2XVswXSwgdls2XVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh2WzddWzBdLCB2WzddWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbNF1bMF0sIHZbNF1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYigwLCAwLCAyNTUpXCI7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyh2WzBdWzBdLCB2WzBdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbNF1bMF0sIHZbNF1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odls3XVswXSwgdls3XVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh2WzNdWzBdLCB2WzNdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbMF1bMF0sIHZbMF1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBcInJnYigyNTUsIDI1NSwgMjU1KVwiO1xuICAgICAgICB0aGlzLmN0eC5tb3ZlVG8odlsxXVswXSwgdlsxXVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh2WzVdWzBdLCB2WzVdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKHZbNl1bMF0sIHZbNl1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8odlsyXVswXSwgdlsyXVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyh2WzFdWzBdLCB2WzFdWzFdKTtcbiAgICAgICAgdGhpcy5jdHguc3Ryb2tlKCk7XG5cbiAgICB9XG5cbiAgICByb3RhdGUzZChjLCBjZW50ZXIsIHhSb3RhdGlvbiwgeVJvdGF0aW9uLCB6Um90YXRpb24pIHtcbiAgICAgICAgLy9jaGFuZ2UgdGhldGEgaW50byByYWRpYW5zXG4gICAgICAgIHhSb3RhdGlvbiA9IHhSb3RhdGlvbiAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICAgICAgeVJvdGF0aW9uID0geVJvdGF0aW9uICogKE1hdGguUEkgLyAxODApO1xuICAgICAgICB6Um90YXRpb24gPSB6Um90YXRpb24gKiAoTWF0aC5QSSAvIDE4MCk7XG5cbiAgICAgICAgbGV0IHRyYW5zbGF0ZUNlbnRlck1hdHJpeCA9IG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIFsxLCAwLCAwLCAtY2VudGVyWzBdXSxcbiAgICAgICAgICAgIFswLCAxLCAwLCAtY2VudGVyWzFdXSxcbiAgICAgICAgICAgIFswLCAwLCAxLCAtY2VudGVyWzJdXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAxXVxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgdHJhbnNsYXRlQmFja01hdHJpeCA9IG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIFsxLCAwLCAwLCBjZW50ZXJbMF1dLFxuICAgICAgICAgICAgWzAsIDEsIDAsIGNlbnRlclsxXV0sXG4gICAgICAgICAgICBbMCwgMCwgMSwgY2VudGVyWzJdXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAxXVxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgeFJvdGF0aW9uTWF0cml4ID0gbWF0aC5tYXRyaXgoW1xuICAgICAgICAgICAgWzEsIDAsIDAsIDBdLFxuICAgICAgICAgICAgWzAsIE1hdGguY29zKHhSb3RhdGlvbiksIC1NYXRoLnNpbih4Um90YXRpb24pLCAwXSxcbiAgICAgICAgICAgIFswLCBNYXRoLnNpbih4Um90YXRpb24pLCBNYXRoLmNvcyh4Um90YXRpb24pLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAxXVxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgeVJvdGF0aW9uTWF0cml4ID0gbWF0aC5tYXRyaXgoW1xuICAgICAgICAgICAgW01hdGguY29zKHlSb3RhdGlvbiksIDAsIC1NYXRoLnNpbih5Um90YXRpb24pLCAwXSxcbiAgICAgICAgICAgIFswLCAxLCAwLCAwXSxcbiAgICAgICAgICAgIFtNYXRoLnNpbih5Um90YXRpb24pLCAwLCBNYXRoLmNvcyh5Um90YXRpb24pLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAxXVxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgelJvdGF0aW9uTWF0cml4ID0gbWF0aC5tYXRyaXgoW1xuICAgICAgICAgICAgW01hdGguY29zKHpSb3RhdGlvbiksIC1NYXRoLnNpbih6Um90YXRpb24pLCAwLCAwXSxcbiAgICAgICAgICAgIFtNYXRoLnNpbih6Um90YXRpb24pLCBNYXRoLmNvcyh6Um90YXRpb24pLCAwLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAxLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAwLCAxXVxuICAgICAgICBdKTtcblxuICAgICAgICBsZXQgbmV3YyA9IFtdO1xuICAgICAgICBmb3IobGV0IHJvdyBvZiBjLl9kYXRhKSB7XG4gICAgICAgICAgICByb3cgPSBtYXRoLm11bHRpcGx5KHRyYW5zbGF0ZUNlbnRlck1hdHJpeCwgcm93KTtcbiAgICAgICAgICAgIHJvdyA9IG1hdGgubXVsdGlwbHkoeFJvdGF0aW9uTWF0cml4LCByb3cpO1xuICAgICAgICAgICAgcm93ID0gbWF0aC5tdWx0aXBseSh5Um90YXRpb25NYXRyaXgsIHJvdyk7XG4gICAgICAgICAgICByb3cgPSBtYXRoLm11bHRpcGx5KHpSb3RhdGlvbk1hdHJpeCwgcm93KTtcbiAgICAgICAgICAgIHJvdyA9IG1hdGgubXVsdGlwbHkodHJhbnNsYXRlQmFja01hdHJpeCwgcm93KTtcbiAgICAgICAgICAgIG5ld2MucHVzaChyb3cpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBtYXRoLm1hdHJpeChuZXdjKTtcbiAgICB9XG5cbiAgICBwcm9qZWN0UGVyc3BlY3RpdmUodmVydGV4ZXMsIGNlbnRlcikge1xuICAgICAgICBsZXQgZCA9IHRoaXMuY2FtZXJhLno7XG5cbiAgICAgICAgbGV0IHIgPSBkIC8gY2VudGVyWzFdO1xuICAgICAgICBsZXQgcHJvamVjdGVkQ2VudGVyID0gW3IgKiBjZW50ZXJbMF0sIHIgKiBjZW50ZXJbMl0sIDFdO1xuXG4gICAgICAgIGxldCB0cmFuc2xhdGVCYWNrTWF0cml4ID0gbWF0aC5tYXRyaXgoW1xuICAgICAgICAgICAgWzEsIDAsIHRoaXMuY2FuLndpZHRoIC8gMl0sXG4gICAgICAgICAgICBbMCwgMSwgdGhpcy5jYW4uaGVpZ2h0IC8gMl0sXG4gICAgICAgICAgICBbMCwgMCwgMV1cbiAgICAgICAgXSk7XG5cblxuXG4gICAgICAgIGxldCB2cyA9IFtdO1xuICAgICAgICBmb3IobGV0IHJvdyBvZiB2ZXJ0ZXhlcy5fZGF0YSkge1xuICAgICAgICAgICAgLy8gcm93ID0gbWF0aC5tdWx0aXBseShwcm9qZWN0aW9uTWF0cml4LCByb3cpO1xuICAgICAgICAgICAgLy8gcm93ID0gbWF0aC5tdWx0aXBseSh0cmFuc2xhdGVDZW50ZXJNYXRyaXgsIHJvdyk7XG4gICAgICAgICAgICBsZXQgeCA9IGQgKiAocm93WzBdIC8gcm93WzJdKTtcbiAgICAgICAgICAgIGxldCB5ID0gZCAqIChyb3dbMV0gLyByb3dbMl0pO1xuICAgICAgICAgICAgcm93ID0gbWF0aC5tYXRyaXgoW3gsIHksIDFdKTtcbiAgICAgICAgICAgIHJvdyA9IG1hdGgubXVsdGlwbHkodHJhbnNsYXRlQmFja01hdHJpeCwgcm93KTtcblxuICAgICAgICAgICAgLy8gbGV0IHIgPSBkIC8gcm93WzFdO1xuICAgICAgICAgICAgLy8gcm93ID0gbWF0aC5tYXRyaXgoW1xuICAgICAgICAgICAgLy8gICAgIHIgKiByb3dbMF0sXG4gICAgICAgICAgICAvLyAgICAgciAqIHJvd1syXSxcbiAgICAgICAgICAgIC8vICAgICAxXG4gICAgICAgICAgICAvLyBdKTtcbiAgICAgICAgICAgIC8vIHJvdyA9IG1hdGgubXVsdGlwbHkodHJhbnNsYXRlQmFja01hdHJpeCwgcm93KTtcbiAgICAgICAgICAgIHZzLnB1c2goW3Jvdy5fZGF0YVswXSwgcm93Ll9kYXRhWzFdXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHZzO1xuICAgIH1cblxuICAgIHByb2plY3RPcnRob2dyYXBoaWModmVydGV4ZXMpIHtcbiAgICAgICAgbGV0IHZzID0gW107XG4gICAgICAgIGZvcihsZXQgdiBvZiB2ZXJ0ZXhlcy5fZGF0YSkge1xuICAgICAgICAgICAgdnMucHVzaChbdlswXSwgdlsxXV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB2cztcbiAgICB9XG5cbiAgICBkcmF3U3F1YXJlKCkge1xuICAgICAgICBsZXQgc2l6ZSA9IDIwMDtcbiAgICAgICAgbGV0IHggPSB0aGlzLm1vdXNlWCAtIHNpemUgLyAyO1xuICAgICAgICBsZXQgeSA9IHRoaXMubW91c2VZIC0gc2l6ZSAvIDI7XG5cbiAgICAgICAgbGV0IGMgPSBtYXRoLm1hdHJpeChbXG4gICAgICAgICAgICBbeCwgeV0sXG4gICAgICAgICAgICBbeCArIHNpemUsIHldLFxuICAgICAgICAgICAgW3ggKyBzaXplLCB5ICsgc2l6ZV0sXG4gICAgICAgICAgICBbeCwgeSArIHNpemVdXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGMgPSB0aGlzLm1ha2VIb21vZ2VuZW91cyhjKTtcblxuXG4gICAgICAgIGMgPSB0aGlzLnJvdGF0ZTJkKGMsIHRoaXMucm90YXRpb25YKS50b0FycmF5KCk7XG5cbiAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gXCJyZ2IoMjU1LCAyNTUsIDI1NSlcIjtcbiAgICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhjWzBdWzBdLCBjWzBdWzFdKTtcbiAgICAgICAgdGhpcy5jdHgubGluZVRvKGNbMV1bMF0sIGNbMV1bMV0pO1xuICAgICAgICB0aGlzLmN0eC5saW5lVG8oY1syXVswXSwgY1syXVsxXSk7XG4gICAgICAgIHRoaXMuY3R4LmxpbmVUbyhjWzNdWzBdLCBjWzNdWzFdKTtcbiAgICAgICAgdGhpcy5jdHguY2xvc2VQYXRoKCk7XG4gICAgICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICB9XG5cbiAgICBtYWtlSG9tb2dlbmVvdXMoYykge1xuICAgICAgICAvL1RyYW5zZm9ybSBjb29yZGluYXRlIGludG8gaG9tb2dlbmVvdXMgY29vcmRpbmF0ZVxuICAgICAgICBjLnJlc2l6ZShbYy5zaXplKClbMF0sIGMuc2l6ZSgpWzFdKzFdLCAxKTtcbiAgICAgICAgcmV0dXJuIGM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0RlbnNlTWF0cml4fSBjXG4gICAgICogQHBhcmFtIHRoZXRhXG4gICAgICogQHJldHVybnMge0RlbnNlTWF0cml4fVxuICAgICAqL1xuICAgIHJvdGF0ZTJkKGMsIHRoZXRhKSB7XG4gICAgICAgIC8vY2hhbmdlIHRoZXRhIGludG8gcmFkaWFuc1xuICAgICAgICB0aGV0YSA9IHRoZXRhICogKE1hdGguUEkgLyAxODApO1xuICAgICAgICAvL2ZpbmQgb3VyIGNlbnRyb2lkIGZvciB0aGUgdHJhbnNsYXRpb24gbWF0cml4XG4gICAgICAgIGxldCBjZW50ZXIgPSB0aGlzLmdldENlbnRyb2lkMmQoYykudG9BcnJheSgpO1xuXG4gICAgICAgIGxldCByb3RhdGlvbk1hdHJpeCA9IG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIFtNYXRoLmNvcyh0aGV0YSksIC1NYXRoLnNpbih0aGV0YSksIDBdLFxuICAgICAgICAgICAgW01hdGguc2luKHRoZXRhKSwgTWF0aC5jb3ModGhldGEpLCAwXSxcbiAgICAgICAgICAgIFswLCAwLCAxXVxuICAgICAgICBdKTtcbiAgICAgICAgbGV0IHRyYW5zbGF0ZUNlbnRlck1hdHJpeCA9IG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIFsxLCAwLCAtY2VudGVyWzBdXSxcbiAgICAgICAgICAgIFswLCAxLCAtY2VudGVyWzFdXSxcbiAgICAgICAgICAgIFswLCAwLCAxXVxuICAgICAgICBdKTtcbiAgICAgICAgbGV0IHRyYW5zbGF0ZUJhY2tNYXRyaXggPSBtYXRoLm1hdHJpeChbXG4gICAgICAgICAgICBbMSwgMCwgY2VudGVyWzBdXSxcbiAgICAgICAgICAgIFswLCAxLCBjZW50ZXJbMV1dLFxuICAgICAgICAgICAgWzAsIDAsIDFdXG4gICAgICAgIF0pO1xuXG4gICAgICAgIGxldCBuZXdjID0gW107XG4gICAgICAgIGZvcihsZXQgcm93IG9mIGMuX2RhdGEpIHtcbiAgICAgICAgICAgIGxldCB0Y20gPSBtYXRoLm11bHRpcGx5KHRyYW5zbGF0ZUNlbnRlck1hdHJpeCwgcm93KTtcbiAgICAgICAgICAgIGxldCBybSA9IG1hdGgubXVsdGlwbHkocm90YXRpb25NYXRyaXgsIHRjbSk7XG4gICAgICAgICAgICBsZXQgdGJtID0gbWF0aC5tdWx0aXBseSh0cmFuc2xhdGVCYWNrTWF0cml4LCBybSk7XG4gICAgICAgICAgICBuZXdjLnB1c2godGJtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbWF0aC5tYXRyaXgobmV3Yyk7XG4gICAgfVxuXG4gICAgZ2V0Q2VudHJvaWQyZChwb2ludHMpe1xuICAgICAgICBsZXQgeCA9IDAsIHkgPSAwO1xuICAgICAgICBmb3IobGV0IHAgb2YgcG9pbnRzLl9kYXRhKSB7XG4gICAgICAgICAgICB4ICs9IHBbMF07XG4gICAgICAgICAgICB5ICs9IHBbMV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGgubWF0cml4KFt4IC8gcG9pbnRzLl9kYXRhLmxlbmd0aCwgeSAvIHBvaW50cy5fZGF0YS5sZW5ndGhdKTtcbiAgICB9XG5cbiAgICBnZXRDZW50cm9pZDNkKHBvaW50cyl7XG4gICAgICAgIGxldCB4ID0gMCwgeSA9IDAsIHogPSAwO1xuICAgICAgICBmb3IobGV0IHAgb2YgcG9pbnRzLl9kYXRhKSB7XG4gICAgICAgICAgICB4ICs9IHBbMF07XG4gICAgICAgICAgICB5ICs9IHBbMV07XG4gICAgICAgICAgICB6ICs9IHBbMl07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1hdGgubWF0cml4KFtcbiAgICAgICAgICAgIHggLyBwb2ludHMuX2RhdGEubGVuZ3RoLFxuICAgICAgICAgICAgeSAvIHBvaW50cy5fZGF0YS5sZW5ndGgsXG4gICAgICAgICAgICB6IC8gcG9pbnRzLl9kYXRhLmxlbmd0aFxuICAgICAgICBdKTtcbiAgICB9XG59OyJdfQ==\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/projective_geometry/Project.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 97066fc805a875422f7e","new class Project {\n\n    constructor() {\n        $(() => {\n            this.can = $(\"#geometry_canvas\")[0];\n            this.ctx = this.can.getContext('2d', {alpha: false});\n            this.can.width = window.innerWidth;\n            this.can.height = window.innerHeight;\n            this.rotationX = Number($(\"#rotationx\").val());\n            this.rotationY = Number($(\"#rotationy\").val());\n            this.rotationZ = Number($(\"#rotationz\").val());\n            this.projection = $(\"#projection\").val();\n            this.boxZ = Number($(\"#boxz\").val());\n            this.mouseX = this.can.width / 2;\n            this.mouseY = this.can.height / 2;\n            this.camera = {\n                x: 0,\n                y: 0,\n                z: Number($(\"#focallength\").val()),\n                rx: 0,\n                ry: 0,\n                rz: 0,\n                width: this.can.width,\n                height: this.can.height,\n                center: {\n                    x: this.can.width / 2,\n                    y: this.can.height / 2\n                }\n            };\n            this.bindEvents();\n            requestAnimationFrame(() => this.draw());\n        });\n    }\n\n    bindEvents() {\n        $(\"#boxz\").change(() => {\n            this.boxZ = Number($(\"#boxz\").val());\n        });\n        $(\"#focallength\").change(() => {\n            this.camera.z = Number($(\"#focallength\").val());\n        });\n        $(\"#projection\").change(() => {\n            this.projection = $(\"#projection\").val();\n        });\n        $(\"#rotationx\").change(() => {\n            this.rotationX = Number($(\"#rotationx\").val());\n        });\n        $(\"#rotationy\").change(() => {\n            this.rotationY = Number($(\"#rotationy\").val());\n        });\n        $(\"#rotationz\").change(() => {\n            this.rotationZ = Number($(\"#rotationz\").val());\n        });\n        $(this.can).on({\n            \"wheel\": (e) => {\n                this.boxZ += e.originalEvent.deltaY;\n            },\n            \"mouseup\": (e) => {\n                this.mouseDown = false;\n            },\n            \"mousedown\": (e) => {\n                this.mouseDown = true;\n                this.mouseStartX = e.originalEvent.clientX;\n                this.mouseStartY = e.originalEvent.clientY;\n                this.mouseStartRotationX = this.rotationX;\n                this.mouseStartRotationY = this.rotationY;\n            },\n            \"mousemove\": (e) => {\n                this.mouseX = e.originalEvent.clientX;\n                this.mouseY = e.originalEvent.clientY;\n\n                if(this.mouseDown) {\n                    this.rotationX = this.mouseStartRotationX + (this.mouseStartX - this.mouseX);\n                    this.rotationY = this.mouseStartRotationY + (this.mouseStartY - this.mouseY);\n                    $(\"#rotationx\").val(this.rotationX);\n                    $(\"#rotationy\").val(this.rotationY);\n                }\n            }\n        });\n    }\n\n    draw() {\n        this.ctx.fillStyle = \"black\";\n        this.ctx.fillRect(0, 0, this.can.width, this.can.height);\n\n        this.drawSquare();\n        this.drawBox();\n\n        requestAnimationFrame(() => this.draw());\n    }\n\n    drawBox() {\n        let size = 200;\n        let x = this.mouseX;\n        let y = this.mouseY;\n        if(this.projection === \"p\") {\n            x = (this.can.width / 2) - this.mouseX;\n            y = (this.can.height / 2) - this.mouseY;\n        }\n        let z = this.boxZ;\n\n        let c = math.matrix([\n            [x - size, y - size, z - size],\n            [x + size, y - size, z - size],\n            [x + size, y + size, z - size],\n            [x - size, y + size, z - size],\n\n            [x - size, y - size, z + size],\n            [x + size, y - size, z + size],\n            [x + size, y + size, z + size],\n            [x - size, y + size, z + size]\n        ]);\n\n        c = this.makeHomogeneous(c);\n        //find our centroid for the translation matrix\n        let center = this.getCentroid3d(c).toArray();\n\n        c = this.rotate3d(c, center, this.rotationX, this.rotationY, this.rotationZ);\n\n        let v;\n        switch(this.projection) {\n            case \"o\":\n                v = this.projectOrthographic(c);\n                break;\n\n            case \"p\":\n                v = this.projectPerspective(c, center);\n                break;\n        }\n\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = \"rgb(255, 0, 0)\";\n        this.ctx.moveTo(v[0][0], v[0][1]);\n        this.ctx.lineTo(v[1][0], v[1][1]);\n        this.ctx.lineTo(v[2][0], v[2][1]);\n        this.ctx.lineTo(v[3][0], v[3][1]);\n        this.ctx.lineTo(v[0][0], v[0][1]);\n        this.ctx.stroke();\n\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = \"rgb(0, 255, 0)\";\n        this.ctx.moveTo(v[4][0], v[4][1]);\n        this.ctx.lineTo(v[5][0], v[5][1]);\n        this.ctx.lineTo(v[6][0], v[6][1]);\n        this.ctx.lineTo(v[7][0], v[7][1]);\n        this.ctx.lineTo(v[4][0], v[4][1]);\n        this.ctx.stroke();\n\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = \"rgb(0, 0, 255)\";\n        this.ctx.moveTo(v[0][0], v[0][1]);\n        this.ctx.lineTo(v[4][0], v[4][1]);\n        this.ctx.lineTo(v[7][0], v[7][1]);\n        this.ctx.lineTo(v[3][0], v[3][1]);\n        this.ctx.lineTo(v[0][0], v[0][1]);\n        this.ctx.stroke();\n\n        this.ctx.beginPath();\n        this.ctx.strokeStyle = \"rgb(255, 255, 255)\";\n        this.ctx.moveTo(v[1][0], v[1][1]);\n        this.ctx.lineTo(v[5][0], v[5][1]);\n        this.ctx.lineTo(v[6][0], v[6][1]);\n        this.ctx.lineTo(v[2][0], v[2][1]);\n        this.ctx.lineTo(v[1][0], v[1][1]);\n        this.ctx.stroke();\n\n    }\n\n    rotate3d(c, center, xRotation, yRotation, zRotation) {\n        //change theta into radians\n        xRotation = xRotation * (Math.PI / 180);\n        yRotation = yRotation * (Math.PI / 180);\n        zRotation = zRotation * (Math.PI / 180);\n\n        let translateCenterMatrix = math.matrix([\n            [1, 0, 0, -center[0]],\n            [0, 1, 0, -center[1]],\n            [0, 0, 1, -center[2]],\n            [0, 0, 0, 1]\n        ]);\n\n        let translateBackMatrix = math.matrix([\n            [1, 0, 0, center[0]],\n            [0, 1, 0, center[1]],\n            [0, 0, 1, center[2]],\n            [0, 0, 0, 1]\n        ]);\n\n        let xRotationMatrix = math.matrix([\n            [1, 0, 0, 0],\n            [0, Math.cos(xRotation), -Math.sin(xRotation), 0],\n            [0, Math.sin(xRotation), Math.cos(xRotation), 0],\n            [0, 0, 0, 1]\n        ]);\n\n        let yRotationMatrix = math.matrix([\n            [Math.cos(yRotation), 0, -Math.sin(yRotation), 0],\n            [0, 1, 0, 0],\n            [Math.sin(yRotation), 0, Math.cos(yRotation), 0],\n            [0, 0, 0, 1]\n        ]);\n\n        let zRotationMatrix = math.matrix([\n            [Math.cos(zRotation), -Math.sin(zRotation), 0, 0],\n            [Math.sin(zRotation), Math.cos(zRotation), 0, 0],\n            [0, 0, 1, 0],\n            [0, 0, 0, 1]\n        ]);\n\n        let newc = [];\n        for(let row of c._data) {\n            row = math.multiply(translateCenterMatrix, row);\n            row = math.multiply(xRotationMatrix, row);\n            row = math.multiply(yRotationMatrix, row);\n            row = math.multiply(zRotationMatrix, row);\n            row = math.multiply(translateBackMatrix, row);\n            newc.push(row);\n        }\n        return math.matrix(newc);\n    }\n\n    projectPerspective(vertexes, center) {\n        let d = this.camera.z;\n\n        let r = d / center[1];\n        let projectedCenter = [r * center[0], r * center[2], 1];\n\n        let translateBackMatrix = math.matrix([\n            [1, 0, this.can.width / 2],\n            [0, 1, this.can.height / 2],\n            [0, 0, 1]\n        ]);\n\n\n\n        let vs = [];\n        for(let row of vertexes._data) {\n            // row = math.multiply(projectionMatrix, row);\n            // row = math.multiply(translateCenterMatrix, row);\n            let x = d * (row[0] / row[2]);\n            let y = d * (row[1] / row[2]);\n            row = math.matrix([x, y, 1]);\n            row = math.multiply(translateBackMatrix, row);\n\n            // let r = d / row[1];\n            // row = math.matrix([\n            //     r * row[0],\n            //     r * row[2],\n            //     1\n            // ]);\n            // row = math.multiply(translateBackMatrix, row);\n            vs.push([row._data[0], row._data[1]]);\n        }\n        return vs;\n    }\n\n    projectOrthographic(vertexes) {\n        let vs = [];\n        for(let v of vertexes._data) {\n            vs.push([v[0], v[1]]);\n        }\n        return vs;\n    }\n\n    drawSquare() {\n        let size = 200;\n        let x = this.mouseX - size / 2;\n        let y = this.mouseY - size / 2;\n\n        let c = math.matrix([\n            [x, y],\n            [x + size, y],\n            [x + size, y + size],\n            [x, y + size]\n        ]);\n\n        c = this.makeHomogeneous(c);\n\n\n        c = this.rotate2d(c, this.rotationX).toArray();\n\n        this.ctx.fillStyle = \"rgb(255, 255, 255)\";\n        this.ctx.beginPath();\n        this.ctx.moveTo(c[0][0], c[0][1]);\n        this.ctx.lineTo(c[1][0], c[1][1]);\n        this.ctx.lineTo(c[2][0], c[2][1]);\n        this.ctx.lineTo(c[3][0], c[3][1]);\n        this.ctx.closePath();\n        this.ctx.fill();\n    }\n\n    makeHomogeneous(c) {\n        //Transform coordinate into homogeneous coordinate\n        c.resize([c.size()[0], c.size()[1]+1], 1);\n        return c;\n    }\n\n    /**\n     *\n     * @param {DenseMatrix} c\n     * @param theta\n     * @returns {DenseMatrix}\n     */\n    rotate2d(c, theta) {\n        //change theta into radians\n        theta = theta * (Math.PI / 180);\n        //find our centroid for the translation matrix\n        let center = this.getCentroid2d(c).toArray();\n\n        let rotationMatrix = math.matrix([\n            [Math.cos(theta), -Math.sin(theta), 0],\n            [Math.sin(theta), Math.cos(theta), 0],\n            [0, 0, 1]\n        ]);\n        let translateCenterMatrix = math.matrix([\n            [1, 0, -center[0]],\n            [0, 1, -center[1]],\n            [0, 0, 1]\n        ]);\n        let translateBackMatrix = math.matrix([\n            [1, 0, center[0]],\n            [0, 1, center[1]],\n            [0, 0, 1]\n        ]);\n\n        let newc = [];\n        for(let row of c._data) {\n            let tcm = math.multiply(translateCenterMatrix, row);\n            let rm = math.multiply(rotationMatrix, tcm);\n            let tbm = math.multiply(translateBackMatrix, rm);\n            newc.push(tbm);\n        }\n        return math.matrix(newc);\n    }\n\n    getCentroid2d(points){\n        let x = 0, y = 0;\n        for(let p of points._data) {\n            x += p[0];\n            y += p[1];\n        }\n        return math.matrix([x / points._data.length, y / points._data.length]);\n    }\n\n    getCentroid3d(points){\n        let x = 0, y = 0, z = 0;\n        for(let p of points._data) {\n            x += p[0];\n            y += p[1];\n            z += p[2];\n        }\n        return math.matrix([\n            x / points._data.length,\n            y / points._data.length,\n            z / points._data.length\n        ]);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/projective_geometry/Project.es6"],"sourceRoot":""}