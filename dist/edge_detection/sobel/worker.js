!function(t){function e(r){if(a[r])return a[r].exports;var n=a[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var a={};e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,r){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,a){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,a,r){return a&&t(e.prototype,a),r&&t(e,r),e}}();importScripts("../../scripts/math.js");var o=function(){function t(e){r(this,t),console.log("Worker.constructor"),console.log(e),this.type=e,this.horizontalFilter=math.matrix([[1,0,-1],[2,0,-2],[1,0,-1]]),this.verticalFilter=math.matrix([[1,2,1],[0,0,0],[-1,-2,-1]])}return n(t,[{key:"process",value:function(t,e,a){var r=e-3,n=a-3,o=[],i=[];t=Array.from(t.data);for(var s=0;s<e;s++){var c=4*a,u=s*c,l=u+c,h=t.slice(u,l),p=t.slice(u+c,l+c),f=t.slice(u+c+c,l+c+c),m=math.matrix([h,p,f]);m=math.reshape(m,[3,a,4]),o.push([]),i.push([]);for(var d=0;d<a;d++){var y=math.subset(m,math.index(math.range(0,3),math.range(d,d+3),0));y=math.reshape(y,[3,3]),y="horizontal"===this.type?math.dotMultiply(y,this.horizontalFilter):math.dotMultiply(y,this.verticalFilter),y=math.sum(y),o[s].push([y,y,y,255]);var v=Math.pow(y,2);if(i[s].push([v,v,v,255]),d===n)break}if(s===r)break}var g=Uint8ClampedArray.from(math.flatten(o)),b=new ImageData(g,o[0].length,o.length);postMessage({action:"SEND_EDGE_IMAGE_DATA",data:b,type:this.type,squared:i})}}]),t}(),i=null;onmessage=function(t){switch(t.data.action){case"START_WORKER":console.log("start worker"),i=new o(t.data.type),postMessage({action:"WORKER_STARTED",type:t.data.type});break;case"DETECT":i.process(t.data.imageData,t.data.height,t.data.width)}}},function(t,e,a){t.exports=a(0)}]);
//# sourceMappingURL=worker.js.map