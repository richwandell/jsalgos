{"version":3,"sources":["webpack:///dist/huffman_coding/Huffman.js","webpack:///webpack/bootstrap 7fafad86d8c758768c64","webpack:///./src/huffman_coding/Huffman.es6"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","Huffman","_this","this","deepest","$","on","doHuffman","e","old","currentTarget","css","delta","originalEvent","wheelDelta","Number","preventDefault","text","val","chars","charData","numIndex","numBits","char","charAt","code","toString","fre","push","keys","map","item","fillNum","Array","fill","join","sort","a","b","buildBeforeTable","root","buildTreeFromCharData","drawTree1","root1","buildHuffmanTree","drawTree2","afterData","generateAfterData","buildAfterTable","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","findCode","err","return","depth","children","left","index","right","leftCode","rightCode","cmp","shift","r","node","color","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","moves","split","last","move","child","html","totalTotalBits","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","totalBits","row","append","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","treeData","canvas","tree","d3","layout","nodeSize","nodes","links","diagonal","svg","projection","y","x","selectAll","enter","attr","num","select","remove","height","Math","max","translateY","width","drawD3Tree","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","getDepth","console","log"],"mappings":"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","file":"./dist/huffman_coding/Huffman.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nnew (function () {\n    function Huffman() {\n        var _this = this;\n\n        _classCallCheck(this, Huffman);\n\n        this.deepest = 0;\n        $(\"#the_text\").on(\"keyup\", function () {\n            return _this.doHuffman();\n        });\n\n        this.doHuffman();\n\n        $(\".d3_container\").on(\"mousewheel\", function (e) {\n            var old = $(e.currentTarget).css(\"zoom\");\n            var delta = e.originalEvent.wheelDelta;\n            delta = Number(1 / delta) * 3;\n            var n = Number(old) + delta;\n            $(\".d3_container\").css(\"zoom\", n);\n            e.preventDefault();\n        });\n    }\n\n    _createClass(Huffman, [{\n        key: \"doHuffman\",\n        value: function doHuffman() {\n            var text = $(\"#the_text\").val();\n            var chars = [];\n            var charData = {};\n\n            var numIndex = 0;\n            var numBits = 0;\n            for (var i = 0; i < text.length; i++) {\n                var char = text.charAt(i);\n                if (typeof charData[char] === \"undefined\") {\n                    charData[char] = {\n                        code: Number(numIndex).toString(2),\n                        fre: 0,\n                        char: char\n                    };\n                    numBits = charData[char].code.length;\n                    numIndex++;\n                }\n                charData[char].fre++;\n\n                chars.push(char);\n            }\n\n            charData = Object.keys(charData).map(function (i) {\n                var item = charData[i];\n                var fillNum = numBits - item.code.length;\n                item.code = Array(fillNum).fill(0).join(\"\") + item.code;\n                return item;\n            }).sort(function (a, b) {\n                if (Number(a.code) > Number(b.code)) {\n                    return 1;\n                } else {\n                    return -1;\n                }\n            });\n\n            this.buildBeforeTable(charData);\n\n            var length = charData.length;\n            var root = this.buildTreeFromCharData(charData);\n            this.drawTree1(root, length);\n\n            var root1 = this.buildHuffmanTree(charData);\n            this.drawTree2(root1, length);\n\n            var afterData = this.generateAfterData(root1, charData);\n            this.buildAfterTable(afterData);\n        }\n    }, {\n        key: \"generateAfterData\",\n        value: function generateAfterData(root, charData) {\n            var data = [];\n\n            var _iteratorNormalCompletion = true;\n            var _didIteratorError = false;\n            var _iteratorError = undefined;\n\n            try {\n                for (var _iterator = charData[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n                    var o = _step.value;\n\n                    var code = this.findCode(root, o.char, \"\", 0);\n                    data.push({\n                        char: o.char,\n                        code: code,\n                        fre: o.fre\n                    });\n                }\n            } catch (err) {\n                _didIteratorError = true;\n                _iteratorError = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion && _iterator.return) {\n                        _iterator.return();\n                    }\n                } finally {\n                    if (_didIteratorError) {\n                        throw _iteratorError;\n                    }\n                }\n            }\n\n            return data;\n        }\n    }, {\n        key: \"findCode\",\n        value: function findCode(root, char, code, depth) {\n            if (typeof root.children !== \"undefined\") {\n                var left = root.children[0];\n                if (left.char === char) {\n                    return code + left.index;\n                }\n\n                var right = root.children[1];\n                if (right.char === char) {\n                    return code + right.index;\n                }\n\n                var leftCode = this.findCode(left, char, code + left.index, depth + 1);\n                var rightCode = this.findCode(right, char, code + right.index, depth + 1);\n\n                if (leftCode !== null) {\n                    return leftCode;\n                }\n\n                if (rightCode !== null) {\n                    return rightCode;\n                }\n            }\n\n            if (this.deepest < depth) {\n                this.deepest = depth + 1;\n            }\n            return null;\n        }\n    }, {\n        key: \"buildHuffmanTree\",\n        value: function buildHuffmanTree(charData) {\n            var cmp = function cmp(a, b) {\n                if (a.fre < b.fre) {\n                    return -1;\n                }\n                return 1;\n            };\n            var data = charData.map(function (i) {\n                return {\n                    fre: i.fre,\n                    char: i.char,\n                    name: i.fre + \"\",\n                    children: []\n                };\n            }).sort(cmp);\n\n            while (data.length > 1) {\n                var l = data.shift();\n                var r = data.shift();\n                l.index = \"0\";\n                r.index = \"1\";\n\n                var node = {\n                    fre: l.fre + r.fre,\n                    char: null,\n                    name: l.fre + r.fre + \"\",\n                    children: [l, r]\n                };\n\n                data.push(node);\n                data = data.sort(cmp);\n            }\n            return data[0];\n        }\n    }, {\n        key: \"buildTreeFromCharData\",\n        value: function buildTreeFromCharData(charData) {\n            var root = {\n                children: [],\n                name: \" \",\n                char: null,\n                color: \"steelblue\"\n            };\n\n            var _iteratorNormalCompletion2 = true;\n            var _didIteratorError2 = false;\n            var _iteratorError2 = undefined;\n\n            try {\n                for (var _iterator2 = charData[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n                    var o = _step2.value;\n\n                    var moves = o.code.split(\"\").map(function (i) {\n                        return Number(i);\n                    });\n                    var last = root;\n\n                    for (var m = 0; m < moves.length; m++) {\n                        var move = moves[m];\n                        var child = {\n                            children: [],\n                            name: move + \"\",\n                            char: null,\n                            color: \"steelblue\"\n                        };\n                        if (m === moves.length - 1) {\n                            child.char = o.char;\n                        }\n\n                        if (typeof last.children[move] === \"undefined\") {\n                            last.children[move] = child;\n                            last = child;\n                        } else {\n                            last = last.children[move];\n                        }\n                    }\n                }\n            } catch (err) {\n                _didIteratorError2 = true;\n                _iteratorError2 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion2 && _iterator2.return) {\n                        _iterator2.return();\n                    }\n                } finally {\n                    if (_didIteratorError2) {\n                        throw _iteratorError2;\n                    }\n                }\n            }\n\n            return root;\n        }\n    }, {\n        key: \"buildBeforeTable\",\n        value: function buildBeforeTable(charData) {\n            $(\"#frequency_before tbody, #frequency_before tfoot\").html(\"\");\n            var totalTotalBits = 0;\n            var _iteratorNormalCompletion3 = true;\n            var _didIteratorError3 = false;\n            var _iteratorError3 = undefined;\n\n            try {\n                for (var _iterator3 = charData[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n                    var o = _step3.value;\n\n                    var totalBits = o.code.length * o.fre;\n                    totalTotalBits += totalBits;\n                    var row = \"<tr>\\n                <td>\" + o.char + \"</td>\\n                <td>\" + o.code + \"</td>\\n                <td>\" + o.fre + \"</td>\\n                <td>\" + totalBits + \"</td>\\n                </tr>\";\n                    $(\"#frequency_before tbody\").append(row);\n                }\n            } catch (err) {\n                _didIteratorError3 = true;\n                _iteratorError3 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion3 && _iterator3.return) {\n                        _iterator3.return();\n                    }\n                } finally {\n                    if (_didIteratorError3) {\n                        throw _iteratorError3;\n                    }\n                }\n            }\n\n            $(\"#frequency_before tfoot\").append(\"\\n            <tr>\\n                <td colspan=\\\"3\\\">Total Size</td>               \\n                <td>\" + totalTotalBits + \"</td>\\n            </tr>\\n        \");\n        }\n    }, {\n        key: \"buildAfterTable\",\n        value: function buildAfterTable(charData) {\n            $(\"#frequency_after tbody, #frequency_after tfoot\").html(\"\");\n            var totalTotalBits = 0;\n            var _iteratorNormalCompletion4 = true;\n            var _didIteratorError4 = false;\n            var _iteratorError4 = undefined;\n\n            try {\n                for (var _iterator4 = charData[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n                    var o = _step4.value;\n\n                    var totalBits = o.code.length * o.fre;\n                    totalTotalBits += totalBits;\n                    var row = \"<tr>\\n                <td>\" + o.char + \"</td>\\n                <td>\" + o.code + \"</td>\\n                <td>\" + o.fre + \"</td>\\n                <td>\" + totalBits + \"</td>\\n                </tr>\";\n                    $(\"#frequency_after tbody\").append(row);\n                }\n            } catch (err) {\n                _didIteratorError4 = true;\n                _iteratorError4 = err;\n            } finally {\n                try {\n                    if (!_iteratorNormalCompletion4 && _iterator4.return) {\n                        _iterator4.return();\n                    }\n                } finally {\n                    if (_didIteratorError4) {\n                        throw _iteratorError4;\n                    }\n                }\n            }\n\n            $(\"#frequency_after tfoot\").append(\"\\n            <tr>\\n                <td colspan=\\\"3\\\">Total Size</td>               \\n                <td>\" + totalTotalBits + \"</td>\\n            </tr>\\n        \");\n        }\n    }, {\n        key: \"drawD3Tree\",\n        value: function drawD3Tree(treeData, canvas) {\n            var tree = d3.layout.tree().nodeSize([20, 50]);\n\n            var nodes = tree.nodes(treeData);\n            var links = tree.links(nodes);\n\n            var diagonal = d3.svg.diagonal().projection(function (d) {\n                return [d.y, d.x];\n            });\n\n            canvas.selectAll(\".link\").data(links).enter().append(\"path\").attr(\"class\", \"link\").attr(\"fill\", \"none\").attr(\"stroke\", \"black\").attr(\"d\", diagonal);\n\n            var node = canvas.selectAll(\".node\").data(nodes).enter().append(\"g\").attr(\"class\", \"node\").attr(\"transform\", function (d) {\n                return \"translate(\" + d.y + \", \" + d.x + \")\";\n            });\n\n            node.append(\"circle\").attr(\"r\", 10).attr(\"stroke\", function (d) {\n                //if(d.name === \"0\" || d.name === \"1\") {\n                return \"steelblue\";\n                //}\n            }).attr(\"fill\", function (d) {\n                //if(d.name === \"0\" || d.name === \"1\") {\n                return \"steelblue\";\n                //}\n                //return \"white\";\n            });\n\n            node.append(\"text\").text(function (d) {\n                if (d.char !== null) {\n                    return d.char;\n                }\n                return d.name;\n            }).attr(\"transform\", function (d) {\n                if (d.char !== null) {\n                    return \"translate(15, 2)\";\n                }\n                return \"translate(-4, 3)\";\n            }).attr(\"stroke\", function (d) {\n                if (d.char === null) {\n                    return \"white\";\n                }\n                return \"black\";\n            }).attr(\"fill\", function (d) {\n                if (d.char === null) {\n                    return \"white\";\n                }\n                return \"black\";\n            });\n\n            node.append(\"text\").text(function (d) {\n                if (d.char !== null) {\n                    return d.name;\n                }\n                return \"\";\n            }).attr(\"transform\", function (d) {\n                return \"translate(-4, 3)\";\n            }).attr(\"stroke\", function (d) {\n                return \"white\";\n            }).attr(\"fill\", function (d) {\n                return \"white\";\n            });\n        }\n    }, {\n        key: \"drawTree1\",\n        value: function drawTree1(treeData, num) {\n            d3.select(\"#d3_container_1 svg\").remove();\n            var height = Math.max(32 * num + 8 * num, 500);\n            var translateY = 21 * num;\n\n            var canvas = d3.select(\"#d3_container_1\").append(\"svg\").attr(\"width\", Math.max(500, $(\"#d3_container_1\").width())).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(50, \" + translateY + \")\");\n\n            this.drawD3Tree(treeData, canvas);\n        }\n    }, {\n        key: \"getDepth\",\n        value: function getDepth(root) {\n            var depth = 0;\n            if (root.children.length > 0) {\n                var _iteratorNormalCompletion5 = true;\n                var _didIteratorError5 = false;\n                var _iteratorError5 = undefined;\n\n                try {\n                    for (var _iterator5 = root.children[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n                        var c = _step5.value;\n\n                        var d = this.getDepth(c);\n\n                        if (d > depth) {\n                            depth = d;\n                        }\n                    }\n                } catch (err) {\n                    _didIteratorError5 = true;\n                    _iteratorError5 = err;\n                } finally {\n                    try {\n                        if (!_iteratorNormalCompletion5 && _iterator5.return) {\n                            _iterator5.return();\n                        }\n                    } finally {\n                        if (_didIteratorError5) {\n                            throw _iteratorError5;\n                        }\n                    }\n                }\n            }\n            return 1 + depth;\n        }\n    }, {\n        key: \"drawTree2\",\n        value: function drawTree2(treeData, num) {\n            d3.select(\"#d3_container_2 svg\").remove();\n            var height = Math.max(32 * num + 8 * num, 500);\n            var depth = this.getDepth(treeData);\n            console.log(depth);\n            var width = depth * 50;\n\n            var translateY = 21 * num;\n\n            var canvas = d3.select(\"#d3_container_2\").append(\"svg\").attr(\"width\", width).attr(\"height\", height).append(\"g\").attr(\"transform\", \"translate(10, \" + translateY + \")\");\n\n            this.drawD3Tree(treeData, canvas);\n        }\n    }]);\n\n    return Huffman;\n}())();\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyY1xcaHVmZm1hbl9jb2RpbmdcXEh1ZmZtYW4uZXM2Il0sIm5hbWVzIjpbImRlZXBlc3QiLCIkIiwib24iLCJkb0h1ZmZtYW4iLCJlIiwib2xkIiwiY3VycmVudFRhcmdldCIsImNzcyIsImRlbHRhIiwib3JpZ2luYWxFdmVudCIsIndoZWVsRGVsdGEiLCJOdW1iZXIiLCJuIiwicHJldmVudERlZmF1bHQiLCJ0ZXh0IiwidmFsIiwiY2hhcnMiLCJjaGFyRGF0YSIsIm51bUluZGV4IiwibnVtQml0cyIsImkiLCJsZW5ndGgiLCJjaGFyIiwiY2hhckF0IiwiY29kZSIsInRvU3RyaW5nIiwiZnJlIiwicHVzaCIsIk9iamVjdCIsImtleXMiLCJtYXAiLCJpdGVtIiwiZmlsbE51bSIsIkFycmF5IiwiZmlsbCIsImpvaW4iLCJzb3J0IiwiYSIsImIiLCJidWlsZEJlZm9yZVRhYmxlIiwicm9vdCIsImJ1aWxkVHJlZUZyb21DaGFyRGF0YSIsImRyYXdUcmVlMSIsInJvb3QxIiwiYnVpbGRIdWZmbWFuVHJlZSIsImRyYXdUcmVlMiIsImFmdGVyRGF0YSIsImdlbmVyYXRlQWZ0ZXJEYXRhIiwiYnVpbGRBZnRlclRhYmxlIiwiZGF0YSIsIm8iLCJmaW5kQ29kZSIsImRlcHRoIiwiY2hpbGRyZW4iLCJsZWZ0IiwiaW5kZXgiLCJyaWdodCIsImxlZnRDb2RlIiwicmlnaHRDb2RlIiwiY21wIiwibmFtZSIsImwiLCJzaGlmdCIsInIiLCJub2RlIiwiY29sb3IiLCJtb3ZlcyIsInNwbGl0IiwibGFzdCIsIm0iLCJtb3ZlIiwiY2hpbGQiLCJodG1sIiwidG90YWxUb3RhbEJpdHMiLCJ0b3RhbEJpdHMiLCJyb3ciLCJhcHBlbmQiLCJ0cmVlRGF0YSIsImNhbnZhcyIsInRyZWUiLCJkMyIsImxheW91dCIsIm5vZGVTaXplIiwibm9kZXMiLCJsaW5rcyIsImRpYWdvbmFsIiwic3ZnIiwicHJvamVjdGlvbiIsImQiLCJ5IiwieCIsInNlbGVjdEFsbCIsImVudGVyIiwiYXR0ciIsIm51bSIsInNlbGVjdCIsInJlbW92ZSIsImhlaWdodCIsIk1hdGgiLCJtYXgiLCJ0cmFuc2xhdGVZIiwid2lkdGgiLCJkcmF3RDNUcmVlIiwiYyIsImdldERlcHRoIiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDSSx1QkFBYztBQUFBOztBQUFBOztBQUNWLGFBQUtBLE9BQUwsR0FBZSxDQUFmO0FBQ0FDLFVBQUUsV0FBRixFQUFlQyxFQUFmLENBQWtCLE9BQWxCLEVBQTJCO0FBQUEsbUJBQU0sTUFBS0MsU0FBTCxFQUFOO0FBQUEsU0FBM0I7O0FBRUEsYUFBS0EsU0FBTDs7QUFFQUYsVUFBRSxlQUFGLEVBQW1CQyxFQUFuQixDQUFzQixZQUF0QixFQUFvQyxVQUFDRSxDQUFELEVBQU87QUFDdkMsZ0JBQUlDLE1BQU1KLEVBQUVHLEVBQUVFLGFBQUosRUFBbUJDLEdBQW5CLENBQXVCLE1BQXZCLENBQVY7QUFDQSxnQkFBSUMsUUFBUUosRUFBRUssYUFBRixDQUFnQkMsVUFBNUI7QUFDQUYsb0JBQVFHLE9BQU8sSUFBSUgsS0FBWCxJQUFvQixDQUE1QjtBQUNBLGdCQUFJSSxJQUFJRCxPQUFPTixHQUFQLElBQWNHLEtBQXRCO0FBQ0FQLGNBQUUsZUFBRixFQUFtQk0sR0FBbkIsQ0FBdUIsTUFBdkIsRUFBK0JLLENBQS9CO0FBQ0FSLGNBQUVTLGNBQUY7QUFDSCxTQVBEO0FBUUg7O0FBZkw7QUFBQTtBQUFBLG9DQWlCZ0I7QUFDUixnQkFBSUMsT0FBT2IsRUFBRSxXQUFGLEVBQWVjLEdBQWYsRUFBWDtBQUNBLGdCQUFJQyxRQUFRLEVBQVo7QUFDQSxnQkFBSUMsV0FBVyxFQUFmOztBQUVBLGdCQUFJQyxXQUFXLENBQWY7QUFDQSxnQkFBSUMsVUFBVSxDQUFkO0FBQ0EsaUJBQUksSUFBSUMsSUFBSSxDQUFaLEVBQWVBLElBQUlOLEtBQUtPLE1BQXhCLEVBQWdDRCxHQUFoQyxFQUFxQztBQUNqQyxvQkFBSUUsT0FBT1IsS0FBS1MsTUFBTCxDQUFZSCxDQUFaLENBQVg7QUFD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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVE1QjtBQUNELG1CQUFPLElBQUlwQyxLQUFYO0FBQ0g7QUF4Vkw7QUFBQTtBQUFBLGtDQTBWY3lCLFFBMVZkLEVBMFZ3QmlCLEdBMVZ4QixFQTBWNEI7QUFDcEJkLGVBQUdlLE1BQUgsQ0FBVSxxQkFBVixFQUFpQ0MsTUFBakM7QUFDQSxnQkFBSUMsU0FBU0MsS0FBS0MsR0FBTCxDQUFTLEtBQUtMLEdBQUwsR0FBVyxJQUFJQSxHQUF4QixFQUE2QixHQUE3QixDQUFiO0FBQ0EsZ0JBQUkxQyxRQUFRLEtBQUtvRCxRQUFMLENBQWMzQixRQUFkLENBQVo7QUFDQTRCLG9CQUFRQyxHQUFSLENBQVl0RCxLQUFaO0FBQ0EsZ0JBQUlpRCxRQUFRakQsUUFBUSxFQUFwQjs7QUFFQSxnQkFBSWdELGFBQWEsS0FBS04sR0FBdEI7O0FBRUEsZ0JBQUloQixTQUFTRSxHQUFHZSxNQUFILENBQVUsaUJBQVYsRUFBNkJuQixNQUE3QixDQUFvQyxLQUFwQyxFQUNSaUIsSUFEUSxDQUNILE9BREcsRUFDTVEsS0FETixFQUVSUixJQUZRLENBRUgsUUFGRyxFQUVPSSxNQUZQLEVBR1JyQixNQUhRLENBR0QsR0FIQyxFQUlSaUIsSUFKUSxDQUlILFdBSkcsRUFJVSxtQkFBaUJPLFVBQWpCLEdBQTRCLEdBSnRDLENBQWI7O0FBTUEsaUJBQUtFLFVBQUwsQ0FBZ0J6QixRQUFoQixFQUEwQkMsTUFBMUI7QUFDSDtBQTFXTDs7QUFBQTtBQUFBIiwiZmlsZSI6Ikh1ZmZtYW4uZXM2Iiwic291cmNlUm9vdCI6IkM6L1VzZXJzL3JpY2gvUGhwc3Rvcm1Qcm9qZWN0cy9qc2FsZ29zIiwic291cmNlc0NvbnRlbnQiOlsibmV3IGNsYXNzIEh1ZmZtYW4ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRlZXBlc3QgPSAwO1xuICAgICAgICAkKFwiI3RoZV90ZXh0XCIpLm9uKFwia2V5dXBcIiwgKCkgPT4gdGhpcy5kb0h1ZmZtYW4oKSk7XG5cbiAgICAgICAgdGhpcy5kb0h1ZmZtYW4oKTtcblxuICAgICAgICAkKFwiLmQzX2NvbnRhaW5lclwiKS5vbihcIm1vdXNld2hlZWxcIiwgKGUpID0+IHtcbiAgICAgICAgICAgIGxldCBvbGQgPSAkKGUuY3VycmVudFRhcmdldCkuY3NzKFwiem9vbVwiKTtcbiAgICAgICAgICAgIGxldCBkZWx0YSA9IGUub3JpZ2luYWxFdmVudC53aGVlbERlbHRhO1xuICAgICAgICAgICAgZGVsdGEgPSBOdW1iZXIoMSAvIGRlbHRhKSAqIDM7XG4gICAgICAgICAgICBsZXQgbiA9IE51bWJlcihvbGQpICsgZGVsdGE7XG4gICAgICAgICAgICAkKFwiLmQzX2NvbnRhaW5lclwiKS5jc3MoXCJ6b29tXCIsIG4pO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBkb0h1ZmZtYW4oKSB7XG4gICAgICAgIGxldCB0ZXh0ID0gJChcIiN0aGVfdGV4dFwiKS52YWwoKTtcbiAgICAgICAgbGV0IGNoYXJzID0gW107XG4gICAgICAgIGxldCBjaGFyRGF0YSA9IHt9O1xuXG4gICAgICAgIGxldCBudW1JbmRleCA9IDA7XG4gICAgICAgIGxldCBudW1CaXRzID0gMDtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IHRleHQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxldCBjaGFyID0gdGV4dC5jaGFyQXQoaSk7XG4gICAgICAgICAgICBpZih0eXBlb2YoY2hhckRhdGFbY2hhcl0pID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgY2hhckRhdGFbY2hhcl0gPSB7XG4gICAgICAgICAgICAgICAgICAgIGNvZGU6IE51bWJlcihudW1JbmRleCkudG9TdHJpbmcoMiksXG4gICAgICAgICAgICAgICAgICAgIGZyZTogMCxcbiAgICAgICAgICAgICAgICAgICAgY2hhcjogY2hhclxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgbnVtQml0cyA9IGNoYXJEYXRhW2NoYXJdLmNvZGUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIG51bUluZGV4Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFyRGF0YVtjaGFyXS5mcmUrKztcblxuICAgICAgICAgICAgY2hhcnMucHVzaChjaGFyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYXJEYXRhID0gT2JqZWN0LmtleXMoY2hhckRhdGEpXG4gICAgICAgICAgICAubWFwKChpKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBjaGFyRGF0YVtpXTtcbiAgICAgICAgICAgICAgICBsZXQgZmlsbE51bSA9IG51bUJpdHMgLSBpdGVtLmNvZGUubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGl0ZW0uY29kZSA9IEFycmF5KGZpbGxOdW0pLmZpbGwoMCkuam9pbihcIlwiKSArIGl0ZW0uY29kZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgICAgIGlmKE51bWJlcihhLmNvZGUpID4gTnVtYmVyKGIuY29kZSkpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5idWlsZEJlZm9yZVRhYmxlKGNoYXJEYXRhKTtcblxuICAgICAgICBsZXQgbGVuZ3RoID0gY2hhckRhdGEubGVuZ3RoO1xuICAgICAgICBsZXQgcm9vdCA9IHRoaXMuYnVpbGRUcmVlRnJvbUNoYXJEYXRhKGNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5kcmF3VHJlZTEocm9vdCwgbGVuZ3RoKTtcblxuXG5cbiAgICAgICAgbGV0IHJvb3QxID0gdGhpcy5idWlsZEh1ZmZtYW5UcmVlKGNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5kcmF3VHJlZTIocm9vdDEsIGxlbmd0aCk7XG5cbiAgICAgICAgbGV0IGFmdGVyRGF0YSA9IHRoaXMuZ2VuZXJhdGVBZnRlckRhdGEocm9vdDEsIGNoYXJEYXRhKTtcbiAgICAgICAgdGhpcy5idWlsZEFmdGVyVGFibGUoYWZ0ZXJEYXRhKTtcbiAgICB9XG5cbiAgICBnZW5lcmF0ZUFmdGVyRGF0YShyb290LCBjaGFyRGF0YSkge1xuICAgICAgICBsZXQgZGF0YSA9IFtdO1xuXG4gICAgICAgIGZvcihsZXQgbyBvZiBjaGFyRGF0YSkge1xuICAgICAgICAgICAgbGV0IGNvZGUgPSB0aGlzLmZpbmRDb2RlKHJvb3QsIG8uY2hhciwgXCJcIiwgMCk7XG4gICAgICAgICAgICBkYXRhLnB1c2goe1xuICAgICAgICAgICAgICAgIGNoYXI6IG8uY2hhcixcbiAgICAgICAgICAgICAgICBjb2RlOiBjb2RlLFxuICAgICAgICAgICAgICAgIGZyZTogby5mcmVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhO1xuICAgIH1cblxuICAgIGZpbmRDb2RlKHJvb3QsIGNoYXIsIGNvZGUsIGRlcHRoKSB7XG4gICAgICAgIGlmKHR5cGVvZihyb290LmNoaWxkcmVuKSAhPT0gXCJ1bmRlZmluZWRcIil7XG4gICAgICAgICAgICBsZXQgbGVmdCA9IHJvb3QuY2hpbGRyZW5bMF07XG4gICAgICAgICAgICBpZihsZWZ0LmNoYXIgPT09IGNoYXIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29kZSArIGxlZnQuaW5kZXg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCByaWdodCA9IHJvb3QuY2hpbGRyZW5bMV07XG4gICAgICAgICAgICBpZihyaWdodC5jaGFyID09PSBjaGFyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvZGUgKyByaWdodC5pbmRleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxlZnRDb2RlID0gdGhpcy5maW5kQ29kZShsZWZ0LCBjaGFyLCBjb2RlICsgbGVmdC5pbmRleCwgZGVwdGgrMSk7XG4gICAgICAgICAgICBsZXQgcmlnaHRDb2RlID0gdGhpcy5maW5kQ29kZShyaWdodCwgY2hhciwgY29kZSArIHJpZ2h0LmluZGV4LCBkZXB0aCsxKTtcblxuICAgICAgICAgICAgaWYobGVmdENvZGUgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVmdENvZGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHJpZ2h0Q29kZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByaWdodENvZGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmRlZXBlc3QgPCBkZXB0aCkge1xuICAgICAgICAgICAgdGhpcy5kZWVwZXN0ID0gZGVwdGggKyAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGJ1aWxkSHVmZm1hblRyZWUoY2hhckRhdGEpIHtcbiAgICAgICAgbGV0IGNtcCA9IChhLCBiKSA9PiB7XG4gICAgICAgICAgICBpZihhLmZyZSA8IGIuZnJlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIDE7XG4gICAgICAgIH07XG4gICAgICAgIGxldCBkYXRhID0gY2hhckRhdGFcbiAgICAgICAgICAgIC5tYXAoKGkpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBmcmU6IGkuZnJlLFxuICAgICAgICAgICAgICAgICAgICBjaGFyOiBpLmNoYXIsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IGkuZnJlICsgXCJcIixcbiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IFtdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zb3J0KGNtcCk7XG5cbiAgICAgICAgd2hpbGUoZGF0YS5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICBsZXQgbCA9IGRhdGEuc2hpZnQoKTtcbiAgICAgICAgICAgIGxldCByID0gZGF0YS5zaGlmdCgpO1xuICAgICAgICAgICAgbC5pbmRleCA9IFwiMFwiO1xuICAgICAgICAgICAgci5pbmRleCA9IFwiMVwiO1xuXG4gICAgICAgICAgICBsZXQgbm9kZSA9IHtcbiAgICAgICAgICAgICAgICBmcmU6IGwuZnJlICsgci5mcmUsXG4gICAgICAgICAgICAgICAgY2hhcjogbnVsbCxcbiAgICAgICAgICAgICAgICBuYW1lOiAobC5mcmUgKyByLmZyZSkgKyBcIlwiLFxuICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbbCxyXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZGF0YS5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgZGF0YSA9IGRhdGEuc29ydChjbXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYXRhWzBdO1xuICAgIH1cblxuICAgIGJ1aWxkVHJlZUZyb21DaGFyRGF0YShjaGFyRGF0YSl7XG4gICAgICAgIGxldCByb290ID0ge1xuICAgICAgICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgICAgICAgbmFtZTogXCIgXCIsXG4gICAgICAgICAgICBjaGFyOiBudWxsLFxuICAgICAgICAgICAgY29sb3I6IFwic3RlZWxibHVlXCJcbiAgICAgICAgfTtcblxuICAgICAgICBmb3IobGV0IG8gb2YgY2hhckRhdGEpIHtcbiAgICAgICAgICAgIGxldCBtb3ZlcyA9IG8uY29kZS5zcGxpdChcIlwiKS5tYXAoaSA9PiBOdW1iZXIoaSkpXG4gICAgICAgICAgICBsZXQgbGFzdCA9IHJvb3Q7XG5cbiAgICAgICAgICAgIGZvcihsZXQgbSA9IDA7IG0gPCBtb3Zlcy5sZW5ndGg7IG0rKyl7XG4gICAgICAgICAgICAgICAgbGV0IG1vdmUgPSBtb3Zlc1ttXTtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGQgPSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbW92ZSArIFwiXCIsXG4gICAgICAgICAgICAgICAgICAgIGNoYXI6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiBcInN0ZWVsYmx1ZVwiXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZihtID09PSBtb3Zlcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgIGNoaWxkLmNoYXIgPSBvLmNoYXI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mKGxhc3QuY2hpbGRyZW5bbW92ZV0pID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QuY2hpbGRyZW5bbW92ZV0gPSBjaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgbGFzdCA9IGNoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxhc3QgPSBsYXN0LmNoaWxkcmVuW21vdmVdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByb290O1xuICAgIH1cblxuICAgIGJ1aWxkQmVmb3JlVGFibGUoY2hhckRhdGEpIHtcbiAgICAgICAgJChcIiNmcmVxdWVuY3lfYmVmb3JlIHRib2R5LCAjZnJlcXVlbmN5X2JlZm9yZSB0Zm9vdFwiKS5odG1sKFwiXCIpO1xuICAgICAgICBsZXQgdG90YWxUb3RhbEJpdHMgPSAwO1xuICAgICAgICBmb3IobGV0IG8gb2YgY2hhckRhdGEpIHtcbiAgICAgICAgICAgIGxldCB0b3RhbEJpdHMgPSBvLmNvZGUubGVuZ3RoICogby5mcmU7XG4gICAgICAgICAgICB0b3RhbFRvdGFsQml0cyArPSB0b3RhbEJpdHM7XG4gICAgICAgICAgICBsZXQgcm93ID0gYDx0cj5cbiAgICAgICAgICAgICAgICA8dGQ+JHtvLmNoYXJ9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+JHtvLmNvZGV9PC90ZD5cbiAgICAgICAgICAgICAgICA8dGQ+JHtvLmZyZX08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD4ke3RvdGFsQml0c308L3RkPlxuICAgICAgICAgICAgICAgIDwvdHI+YDtcbiAgICAgICAgICAgICQoXCIjZnJlcXVlbmN5X2JlZm9yZSB0Ym9keVwiKS5hcHBlbmQocm93KTtcbiAgICAgICAgfVxuICAgICAgICAkKFwiI2ZyZXF1ZW5jeV9iZWZvcmUgdGZvb3RcIikuYXBwZW5kKGBcbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj1cIjNcIj5Ub3RhbCBTaXplPC90ZD4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8dGQ+JHt0b3RhbFRvdGFsQml0c308L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgYCk7XG4gICAgfVxuXG4gICAgYnVpbGRBZnRlclRhYmxlKGNoYXJEYXRhKSB7XG4gICAgICAgICQoXCIjZnJlcXVlbmN5X2FmdGVyIHRib2R5LCAjZnJlcXVlbmN5X2FmdGVyIHRmb290XCIpLmh0bWwoXCJcIik7XG4gICAgICAgIGxldCB0b3RhbFRvdGFsQml0cyA9IDA7XG4gICAgICAgIGZvcihsZXQgbyBvZiBjaGFyRGF0YSkge1xuICAgICAgICAgICAgbGV0IHRvdGFsQml0cyA9IG8uY29kZS5sZW5ndGggKiBvLmZyZTtcbiAgICAgICAgICAgIHRvdGFsVG90YWxCaXRzICs9IHRvdGFsQml0cztcbiAgICAgICAgICAgIGxldCByb3cgPSBgPHRyPlxuICAgICAgICAgICAgICAgIDx0ZD4ke28uY2hhcn08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD4ke28uY29kZX08L3RkPlxuICAgICAgICAgICAgICAgIDx0ZD4ke28uZnJlfTwvdGQ+XG4gICAgICAgICAgICAgICAgPHRkPiR7dG90YWxCaXRzfTwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5gO1xuICAgICAgICAgICAgJChcIiNmcmVxdWVuY3lfYWZ0ZXIgdGJvZHlcIikuYXBwZW5kKHJvdyk7XG4gICAgICAgIH1cbiAgICAgICAgJChcIiNmcmVxdWVuY3lfYWZ0ZXIgdGZvb3RcIikuYXBwZW5kKGBcbiAgICAgICAgICAgIDx0cj5cbiAgICAgICAgICAgICAgICA8dGQgY29sc3Bhbj1cIjNcIj5Ub3RhbCBTaXplPC90ZD4gICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICA8dGQ+JHt0b3RhbFRvdGFsQml0c308L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgYCk7XG4gICAgfVxuXG4gICAgZHJhd0QzVHJlZSh0cmVlRGF0YSwgY2FudmFzKSB7XG4gICAgICAgIGxldCB0cmVlID0gZDMubGF5b3V0LnRyZWUoKS5ub2RlU2l6ZShbMjAsIDUwXSk7XG5cbiAgICAgICAgbGV0IG5vZGVzID0gdHJlZS5ub2Rlcyh0cmVlRGF0YSk7XG4gICAgICAgIGxldCBsaW5rcyA9IHRyZWUubGlua3Mobm9kZXMpO1xuXG4gICAgICAgIGxldCBkaWFnb25hbCA9IGQzLnN2Zy5kaWFnb25hbCgpXG4gICAgICAgICAgICAucHJvamVjdGlvbihmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gW2QueSwgZC54XTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIGNhbnZhcy5zZWxlY3RBbGwoXCIubGlua1wiKVxuICAgICAgICAgICAgLmRhdGEobGlua3MpXG4gICAgICAgICAgICAuZW50ZXIoKVxuICAgICAgICAgICAgLmFwcGVuZChcInBhdGhcIilcbiAgICAgICAgICAgIC5hdHRyKFwiY2xhc3NcIiwgXCJsaW5rXCIpXG4gICAgICAgICAgICAuYXR0cihcImZpbGxcIiwgXCJub25lXCIpXG4gICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBcImJsYWNrXCIpXG4gICAgICAgICAgICAuYXR0cihcImRcIiwgZGlhZ29uYWwpO1xuXG4gICAgICAgIGxldCBub2RlID0gY2FudmFzLnNlbGVjdEFsbChcIi5ub2RlXCIpXG4gICAgICAgICAgICAuZGF0YShub2RlcylcbiAgICAgICAgICAgIC5lbnRlcigpXG4gICAgICAgICAgICAuYXBwZW5kKFwiZ1wiKVxuICAgICAgICAgICAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueSArIFwiLCBcIiArIGQueCArIFwiKVwiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbm9kZS5hcHBlbmQoXCJjaXJjbGVcIilcbiAgICAgICAgICAgIC5hdHRyKFwiclwiLCAxMClcbiAgICAgICAgICAgIC5hdHRyKFwic3Ryb2tlXCIsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIC8vaWYoZC5uYW1lID09PSBcIjBcIiB8fCBkLm5hbWUgPT09IFwiMVwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcInN0ZWVsYmx1ZVwiO1xuICAgICAgICAgICAgICAgIC8vfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICAvL2lmKGQubmFtZSA9PT0gXCIwXCIgfHwgZC5uYW1lID09PSBcIjFcIikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJzdGVlbGJsdWVcIjtcbiAgICAgICAgICAgICAgICAvL31cbiAgICAgICAgICAgICAgICAvL3JldHVybiBcIndoaXRlXCI7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICBub2RlLmFwcGVuZChcInRleHRcIilcbiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIGlmKGQuY2hhciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC5jaGFyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZC5uYW1lO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICBpZihkLmNoYXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFwidHJhbnNsYXRlKDE1LCAyKVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ0cmFuc2xhdGUoLTQsIDMpXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJzdHJva2VcIiwgZnVuY3Rpb24oZCl7XG4gICAgICAgICAgICAgICAgaWYoZC5jaGFyID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBcIndoaXRlXCI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBcImJsYWNrXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpe1xuICAgICAgICAgICAgICAgIGlmKGQuY2hhciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gXCJ3aGl0ZVwiO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gXCJibGFja1wiO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgbm9kZS5hcHBlbmQoXCJ0ZXh0XCIpXG4gICAgICAgICAgICAudGV4dChmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICBpZihkLmNoYXIgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBcInRyYW5zbGF0ZSgtNCwgMylcIjtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYXR0cihcInN0cm9rZVwiLCBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ3aGl0ZVwiO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJ3aGl0ZVwiO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZHJhd1RyZWUxKHRyZWVEYXRhLCBudW0pe1xuICAgICAgICBkMy5zZWxlY3QoXCIjZDNfY29udGFpbmVyXzEgc3ZnXCIpLnJlbW92ZSgpO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gTWF0aC5tYXgoMzIgKiBudW0gKyA4ICogbnVtLCA1MDApO1xuICAgICAgICBsZXQgdHJhbnNsYXRlWSA9IDIxICogbnVtO1xuXG4gICAgICAgIGxldCBjYW52YXMgPSBkMy5zZWxlY3QoXCIjZDNfY29udGFpbmVyXzFcIikuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIE1hdGgubWF4KDUwMCwgJChcIiNkM19jb250YWluZXJfMVwiKS53aWR0aCgpKSlcbiAgICAgICAgICAgIC5hdHRyKFwiaGVpZ2h0XCIsIGhlaWdodClcbiAgICAgICAgICAgIC5hcHBlbmQoXCJnXCIpXG4gICAgICAgICAgICAuYXR0cihcInRyYW5zZm9ybVwiLCBcInRyYW5zbGF0ZSg1MCwgXCIgKyB0cmFuc2xhdGVZICsgXCIpXCIpO1xuXG4gICAgICAgIHRoaXMuZHJhd0QzVHJlZSh0cmVlRGF0YSwgY2FudmFzKTtcbiAgICB9XG5cbiAgICBnZXREZXB0aChyb290KSB7XG4gICAgICAgIGxldCBkZXB0aCA9IDA7XG4gICAgICAgIGlmKHJvb3QuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgZm9yKGxldCBjIG9mIHJvb3QuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBsZXQgZCA9IHRoaXMuZ2V0RGVwdGgoYyk7XG5cbiAgICAgICAgICAgICAgICBpZihkID4gZGVwdGgpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVwdGggPSBkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMSArIGRlcHRoO1xuICAgIH1cblxuICAgIGRyYXdUcmVlMih0cmVlRGF0YSwgbnVtKXtcbiAgICAgICAgZDMuc2VsZWN0KFwiI2QzX2NvbnRhaW5lcl8yIHN2Z1wiKS5yZW1vdmUoKTtcbiAgICAgICAgbGV0IGhlaWdodCA9IE1hdGgubWF4KDMyICogbnVtICsgOCAqIG51bSwgNTAwKTtcbiAgICAgICAgbGV0IGRlcHRoID0gdGhpcy5nZXREZXB0aCh0cmVlRGF0YSk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRlcHRoKTtcbiAgICAgICAgbGV0IHdpZHRoID0gZGVwdGggKiA1MDtcblxuICAgICAgICBsZXQgdHJhbnNsYXRlWSA9IDIxICogbnVtO1xuXG4gICAgICAgIGxldCBjYW52YXMgPSBkMy5zZWxlY3QoXCIjZDNfY29udGFpbmVyXzJcIikuYXBwZW5kKFwic3ZnXCIpXG4gICAgICAgICAgICAuYXR0cihcIndpZHRoXCIsIHdpZHRoKVxuICAgICAgICAgICAgLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KVxuICAgICAgICAgICAgLmFwcGVuZChcImdcIilcbiAgICAgICAgICAgIC5hdHRyKFwidHJhbnNmb3JtXCIsIFwidHJhbnNsYXRlKDEwLCBcIit0cmFuc2xhdGVZK1wiKVwiKTtcblxuICAgICAgICB0aGlzLmRyYXdEM1RyZWUodHJlZURhdGEsIGNhbnZhcyk7XG4gICAgfVxufTsiXX0=\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/huffman_coding/Huffman.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 7fafad86d8c758768c64","new class Huffman {\n    constructor() {\n        this.deepest = 0;\n        $(\"#the_text\").on(\"keyup\", () => this.doHuffman());\n\n        this.doHuffman();\n\n        $(\".d3_container\").on(\"mousewheel\", (e) => {\n            let old = $(e.currentTarget).css(\"zoom\");\n            let delta = e.originalEvent.wheelDelta;\n            delta = Number(1 / delta) * 3;\n            let n = Number(old) + delta;\n            $(\".d3_container\").css(\"zoom\", n);\n            e.preventDefault();\n        });\n    }\n\n    doHuffman() {\n        let text = $(\"#the_text\").val();\n        let chars = [];\n        let charData = {};\n\n        let numIndex = 0;\n        let numBits = 0;\n        for(let i = 0; i < text.length; i++) {\n            let char = text.charAt(i);\n            if(typeof(charData[char]) === \"undefined\") {\n                charData[char] = {\n                    code: Number(numIndex).toString(2),\n                    fre: 0,\n                    char: char\n                };\n                numBits = charData[char].code.length;\n                numIndex++;\n            }\n            charData[char].fre++;\n\n            chars.push(char);\n        }\n\n        charData = Object.keys(charData)\n            .map((i) => {\n                let item = charData[i];\n                let fillNum = numBits - item.code.length;\n                item.code = Array(fillNum).fill(0).join(\"\") + item.code;\n                return item;\n            })\n            .sort((a, b) => {\n                if(Number(a.code) > Number(b.code)){\n                    return 1;\n                } else {\n                    return -1;\n                }\n            });\n\n        this.buildBeforeTable(charData);\n\n        let length = charData.length;\n        let root = this.buildTreeFromCharData(charData);\n        this.drawTree1(root, length);\n\n\n\n        let root1 = this.buildHuffmanTree(charData);\n        this.drawTree2(root1, length);\n\n        let afterData = this.generateAfterData(root1, charData);\n        this.buildAfterTable(afterData);\n    }\n\n    generateAfterData(root, charData) {\n        let data = [];\n\n        for(let o of charData) {\n            let code = this.findCode(root, o.char, \"\", 0);\n            data.push({\n                char: o.char,\n                code: code,\n                fre: o.fre\n            });\n        }\n        return data;\n    }\n\n    findCode(root, char, code, depth) {\n        if(typeof(root.children) !== \"undefined\"){\n            let left = root.children[0];\n            if(left.char === char) {\n                return code + left.index;\n            }\n\n            let right = root.children[1];\n            if(right.char === char) {\n                return code + right.index;\n            }\n\n            let leftCode = this.findCode(left, char, code + left.index, depth+1);\n            let rightCode = this.findCode(right, char, code + right.index, depth+1);\n\n            if(leftCode !== null) {\n                return leftCode;\n            }\n\n            if(rightCode !== null) {\n                return rightCode;\n            }\n        }\n\n        if(this.deepest < depth) {\n            this.deepest = depth + 1;\n        }\n        return null;\n    }\n\n    buildHuffmanTree(charData) {\n        let cmp = (a, b) => {\n            if(a.fre < b.fre) {\n                return -1;\n            }\n            return 1;\n        };\n        let data = charData\n            .map((i) => {\n                return {\n                    fre: i.fre,\n                    char: i.char,\n                    name: i.fre + \"\",\n                    children: []\n                }\n            })\n            .sort(cmp);\n\n        while(data.length > 1) {\n            let l = data.shift();\n            let r = data.shift();\n            l.index = \"0\";\n            r.index = \"1\";\n\n            let node = {\n                fre: l.fre + r.fre,\n                char: null,\n                name: (l.fre + r.fre) + \"\",\n                children: [l,r]\n            };\n\n            data.push(node);\n            data = data.sort(cmp);\n        }\n        return data[0];\n    }\n\n    buildTreeFromCharData(charData){\n        let root = {\n            children: [],\n            name: \" \",\n            char: null,\n            color: \"steelblue\"\n        };\n\n        for(let o of charData) {\n            let moves = o.code.split(\"\").map(i => Number(i))\n            let last = root;\n\n            for(let m = 0; m < moves.length; m++){\n                let move = moves[m];\n                let child = {\n                    children: [],\n                    name: move + \"\",\n                    char: null,\n                    color: \"steelblue\"\n                };\n                if(m === moves.length - 1) {\n                    child.char = o.char;\n                }\n\n                if(typeof(last.children[move]) === \"undefined\") {\n                    last.children[move] = child;\n                    last = child;\n                } else {\n                    last = last.children[move];\n                }\n            }\n        }\n\n        return root;\n    }\n\n    buildBeforeTable(charData) {\n        $(\"#frequency_before tbody, #frequency_before tfoot\").html(\"\");\n        let totalTotalBits = 0;\n        for(let o of charData) {\n            let totalBits = o.code.length * o.fre;\n            totalTotalBits += totalBits;\n            let row = `<tr>\n                <td>${o.char}</td>\n                <td>${o.code}</td>\n                <td>${o.fre}</td>\n                <td>${totalBits}</td>\n                </tr>`;\n            $(\"#frequency_before tbody\").append(row);\n        }\n        $(\"#frequency_before tfoot\").append(`\n            <tr>\n                <td colspan=\"3\">Total Size</td>               \n                <td>${totalTotalBits}</td>\n            </tr>\n        `);\n    }\n\n    buildAfterTable(charData) {\n        $(\"#frequency_after tbody, #frequency_after tfoot\").html(\"\");\n        let totalTotalBits = 0;\n        for(let o of charData) {\n            let totalBits = o.code.length * o.fre;\n            totalTotalBits += totalBits;\n            let row = `<tr>\n                <td>${o.char}</td>\n                <td>${o.code}</td>\n                <td>${o.fre}</td>\n                <td>${totalBits}</td>\n                </tr>`;\n            $(\"#frequency_after tbody\").append(row);\n        }\n        $(\"#frequency_after tfoot\").append(`\n            <tr>\n                <td colspan=\"3\">Total Size</td>               \n                <td>${totalTotalBits}</td>\n            </tr>\n        `);\n    }\n\n    drawD3Tree(treeData, canvas) {\n        let tree = d3.layout.tree().nodeSize([20, 50]);\n\n        let nodes = tree.nodes(treeData);\n        let links = tree.links(nodes);\n\n        let diagonal = d3.svg.diagonal()\n            .projection(function(d){\n                return [d.y, d.x];\n            });\n\n        canvas.selectAll(\".link\")\n            .data(links)\n            .enter()\n            .append(\"path\")\n            .attr(\"class\", \"link\")\n            .attr(\"fill\", \"none\")\n            .attr(\"stroke\", \"black\")\n            .attr(\"d\", diagonal);\n\n        let node = canvas.selectAll(\".node\")\n            .data(nodes)\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"node\")\n            .attr(\"transform\", function(d){\n                return \"translate(\" + d.y + \", \" + d.x + \")\";\n            });\n\n        node.append(\"circle\")\n            .attr(\"r\", 10)\n            .attr(\"stroke\", function(d){\n                //if(d.name === \"0\" || d.name === \"1\") {\n                    return \"steelblue\";\n                //}\n            })\n            .attr(\"fill\", function(d){\n                //if(d.name === \"0\" || d.name === \"1\") {\n                    return \"steelblue\";\n                //}\n                //return \"white\";\n            });\n\n        node.append(\"text\")\n            .text(function(d){\n                if(d.char !== null) {\n                    return d.char;\n                }\n                return d.name;\n            })\n            .attr(\"transform\", function(d) {\n                if(d.char !== null) {\n                    return \"translate(15, 2)\";\n                }\n                return \"translate(-4, 3)\";\n            })\n            .attr(\"stroke\", function(d){\n                if(d.char === null) {\n                    return \"white\";\n                }\n                return \"black\";\n            })\n            .attr(\"fill\", function(d){\n                if(d.char === null) {\n                    return \"white\";\n                }\n                return \"black\";\n            });\n\n        node.append(\"text\")\n            .text(function(d){\n                if(d.char !== null) {\n                    return d.name;\n                }\n                return \"\";\n            })\n            .attr(\"transform\", function(d) {\n                return \"translate(-4, 3)\";\n            })\n            .attr(\"stroke\", function(d){\n                return \"white\";\n            })\n            .attr(\"fill\", function(d){\n                return \"white\";\n            });\n    }\n\n    drawTree1(treeData, num){\n        d3.select(\"#d3_container_1 svg\").remove();\n        let height = Math.max(32 * num + 8 * num, 500);\n        let translateY = 21 * num;\n\n        let canvas = d3.select(\"#d3_container_1\").append(\"svg\")\n            .attr(\"width\", Math.max(500, $(\"#d3_container_1\").width()))\n            .attr(\"height\", height)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(50, \" + translateY + \")\");\n\n        this.drawD3Tree(treeData, canvas);\n    }\n\n    getDepth(root) {\n        let depth = 0;\n        if(root.children.length > 0) {\n            for(let c of root.children) {\n                let d = this.getDepth(c);\n\n                if(d > depth) {\n                    depth = d;\n                }\n            }\n        }\n        return 1 + depth;\n    }\n\n    drawTree2(treeData, num){\n        d3.select(\"#d3_container_2 svg\").remove();\n        let height = Math.max(32 * num + 8 * num, 500);\n        let depth = this.getDepth(treeData);\n        console.log(depth);\n        let width = depth * 50;\n\n        let translateY = 21 * num;\n\n        let canvas = d3.select(\"#d3_container_2\").append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(10, \"+translateY+\")\");\n\n        this.drawD3Tree(treeData, canvas);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/huffman_coding/Huffman.es6"],"sourceRoot":""}