!function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();new(function(){function e(){var t=this;n(this,e),this.deepest=0,$("#the_text").on("keyup",function(){return t.doHuffman()}),this.doHuffman(),$(".d3_container").on("mousewheel",function(e){var t=$(e.currentTarget).css("zoom"),r=e.originalEvent.wheelDelta;r=3*Number(1/r);var n=Number(t)+r;$(".d3_container").css("zoom",n),e.preventDefault()})}return a(e,[{key:"doHuffman",value:function(){for(var e=$("#the_text").val(),t=[],r={},n=0,a=0,o=0;o<e.length;o++){var i=e.charAt(o);void 0===r[i]&&(r[i]={code:Number(n).toString(2),fre:0,char:i},a=r[i].code.length,n++),r[i].fre++,t.push(i)}r=Object.keys(r).map(function(e){var t=r[e],n=a-t.code.length;return t.code=Array(n).fill(0).join("")+t.code,t}).sort(function(e,t){return Number(e.code)>Number(t.code)?1:-1}),this.buildBeforeTable(r);var l=r.length,u=this.buildTreeFromCharData(r);this.drawTree1(u,l);var f=this.buildHuffmanTree(r);this.drawTree2(f,l);var c=this.generateAfterData(f,r);this.buildAfterTable(c)}},{key:"generateAfterData",value:function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var u=i.value,f=this.findCode(e,u.char,"",0);r.push({char:u.char,code:f,fre:u.fre})}}catch(e){a=!0,o=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw o}}return r}},{key:"findCode",value:function(e,t,r,n){if(void 0!==e.children){var a=e.children[0];if(a.char===t)return r+a.index;var o=e.children[1];if(o.char===t)return r+o.index;var i=this.findCode(a,t,r+a.index,n+1),l=this.findCode(o,t,r+o.index,n+1);if(null!==i)return i;if(null!==l)return l}return this.deepest<n&&(this.deepest=n+1),null}},{key:"buildHuffmanTree",value:function(e){for(var t=function(e,t){return e.fre<t.fre?-1:1},r=e.map(function(e){return{fre:e.fre,char:e.char,name:e.fre+"",children:[]}}).sort(t);r.length>1;){var n=r.shift(),a=r.shift();n.index="0",a.index="1";var o={fre:n.fre+a.fre,char:null,name:n.fre+a.fre+"",children:[n,a]};r.push(o),r=r.sort(t)}return r[0]}},{key:"buildTreeFromCharData",value:function(e){var t={children:[],name:" ",char:null,color:"steelblue"},r=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0)for(var l=o.value,u=l.code.split("").map(function(e){return Number(e)}),f=t,c=0;c<u.length;c++){var d=u[c],h={children:[],name:d+"",char:null,color:"steelblue"};c===u.length-1&&(h.char=l.char),void 0===f.children[d]?(f.children[d]=h,f=h):f=f.children[d]}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}return t}},{key:"buildBeforeTable",value:function(e){$("#frequency_before tbody, #frequency_before tfoot").html("");var t=0,r=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,u=l.code.length*l.fre;t+=u;var f="<tr>\n                <td>"+l.char+"</td>\n                <td>"+l.code+"</td>\n                <td>"+l.fre+"</td>\n                <td>"+u+"</td>\n                </tr>";$("#frequency_before tbody").append(f)}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}$("#frequency_before tfoot").append('\n            <tr>\n                <td colspan="3">Total Size</td>               \n                <td>'+t+"</td>\n            </tr>\n        ")}},{key:"buildAfterTable",value:function(e){$("#frequency_after tbody, #frequency_after tfoot").html("");var t=0,r=!0,n=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,u=l.code.length*l.fre;t+=u;var f="<tr>\n                <td>"+l.char+"</td>\n                <td>"+l.code+"</td>\n                <td>"+l.fre+"</td>\n                <td>"+u+"</td>\n                </tr>";$("#frequency_after tbody").append(f)}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}$("#frequency_after tfoot").append('\n            <tr>\n                <td colspan="3">Total Size</td>               \n                <td>'+t+"</td>\n            </tr>\n        ")}},{key:"drawD3Tree",value:function(e,t){var r=d3.layout.tree().nodeSize([20,50]),n=r.nodes(e),a=r.links(n),o=d3.svg.diagonal().projection(function(e){return[e.y,e.x]});t.selectAll(".link").data(a).enter().append("path").attr("class","link").attr("fill","none").attr("stroke","black").attr("d",o);var i=t.selectAll(".node").data(n).enter().append("g").attr("class","node").attr("transform",function(e){return"translate("+e.y+", "+e.x+")"});i.append("circle").attr("r",10).attr("stroke",function(e){return"steelblue"}).attr("fill",function(e){return"steelblue"}),i.append("text").text(function(e){return null!==e.char?e.char:e.name}).attr("transform",function(e){return null!==e.char?"translate(15, 2)":"translate(-4, 3)"}).attr("stroke",function(e){return null===e.char?"white":"black"}).attr("fill",function(e){return null===e.char?"white":"black"}),i.append("text").text(function(e){return null!==e.char?e.name:""}).attr("transform",function(e){return"translate(-4, 3)"}).attr("stroke",function(e){return"white"}).attr("fill",function(e){return"white"})}},{key:"drawTree1",value:function(e,t){d3.select("#d3_container_1 svg").remove();var r=Math.max(32*t+8*t,500),n=21*t,a=d3.select("#d3_container_1").append("svg").attr("width",Math.max(500,$("#d3_container_1").width())).attr("height",r).append("g").attr("transform","translate(50, "+n+")");this.drawD3Tree(e,a)}},{key:"getDepth",value:function(e){var t=0;if(e.children.length>0){var r=!0,n=!1,a=void 0;try{for(var o,i=e.children[Symbol.iterator]();!(r=(o=i.next()).done);r=!0){var l=o.value,u=this.getDepth(l);u>t&&(t=u)}}catch(e){n=!0,a=e}finally{try{!r&&i.return&&i.return()}finally{if(n)throw a}}}return 1+t}},{key:"drawTree2",value:function(e,t){d3.select("#d3_container_2 svg").remove();var r=Math.max(32*t+8*t,500),n=this.getDepth(e);console.log(n);var a=50*n,o=21*t,i=d3.select("#d3_container_2").append("svg").attr("width",a).attr("height",r).append("g").attr("transform","translate(10, "+o+")");this.drawD3Tree(e,i)}}]),e}())},function(e,t,r){e.exports=r(0)}]);
//# sourceMappingURL=Huffman.js.map