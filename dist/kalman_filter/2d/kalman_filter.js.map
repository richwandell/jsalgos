{"version":3,"sources":["webpack:///dist/kalman_filter/2d/kalman_filter.js","webpack:///webpack/bootstrap b2ab3b24123a56668349","webpack:///./src/kalman_filter/2d/Kalman.es6"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","Kalman","this","realNumbers","dirtyNumbers","kalmanPrediction","math","ones","$","kalman","mea","eestPlusEmea","add","eest","emea","kg","dotDivide","meaMinusPest","subtract","pest","kgTimesMea","dotMultiply","cest","emeaPlusEest","emeaTimesEest","valueOf","fakeNumber","current","min","real_numbers","fake_which","max","Math","random","makeDirtyNumbers","real_number","length","Array","apply","map","real_number_array","push","dirty_numbers","makeSeries","r1","r2","zip","e","console","log","kalman_prediction","val","data","lineWidth","color","marker","enabled","radius","series","highcharts","chart","type","title","text","yAxis","plotLines","width","legend","layout","align","verticalAlign","borderWidth","click","remove","interval","clearInterval","setInterval","real1","Number","real2","value1","value2","kvalue","real","each","addSeries","measurement","kalmans","shift","addPoint","redraw","change","jQuery"],"mappings":"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","file":"./dist/kalman_filter/2d/kalman_filter.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 1);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nnew function Kalman() {\n    _classCallCheck(this, Kalman);\n\n    this.realNumbers = [];\n    this.dirtyNumbers = [];\n    this.kalmanPrediction = null;\n\n    var fake_which;\n\n    var real_number_array = [];\n\n    var cest,\n        pest = math.ones(2),\n        mea,\n        kg,\n        eest = math.ones(2),\n        emea = math.ones(2);\n}();(function ($) {\n\n    function kalman(m) {\n        mea = m;\n\n        var eestPlusEmea = math.add(eest, emea);\n        kg = math.dotDivide(eest, eestPlusEmea);\n\n        var meaMinusPest = math.subtract(mea, pest);\n        var kgTimesMea = math.dotMultiply(kg, meaMinusPest);\n        cest = math.add(pest, kgTimesMea);\n        pest = cest;\n\n        var emeaPlusEest = math.add(emea, eest);\n        var emeaTimesEest = math.dotMultiply(emea, eest);\n        eest = math.dotDivide(emeaTimesEest, emeaPlusEest);\n\n        return cest.valueOf();\n    }\n\n    function fakeNumber(i, current) {\n        var min = real_numbers[fake_which][current] - real_numbers[fake_which][current] * .8;\n        var max = real_numbers[fake_which][current] + real_numbers[fake_which][current] * .8;\n        return Math.random() * (max - min) + min;\n    }\n\n    function makeDirtyNumbers(real_number, length) {\n        real_numbers[real_number] = Array.apply(null, { length: length }).map(function (i, current) {\n            return real_number;\n        });\n        fake_which = real_number;\n        real_number_array.push(real_number);\n        dirty_numbers[real_number] = real_numbers[real_number].map(fakeNumber);\n    }\n\n    function makeSeries(r1, r2) {\n\n        makeDirtyNumbers(r1, 50);\n        makeDirtyNumbers(r2, 50);\n\n        var zip = dirty_numbers[r1].map(function (e, i) {\n            return [e, dirty_numbers[r2][i]];\n        });\n\n        pest = zip[0];\n\n        console.log(dirty_numbers, zip);\n\n        kalman_prediction = zip.map(kalman);\n        $(\"#real1\").val(r1);\n        $(\"#real2\").val(r2);\n\n        return [{\n            name: 'Measurement: ',\n            data: zip,\n            lineWidth: 0,\n            color: 'rgba(119, 152, 191, .5)',\n            marker: {\n                enabled: true,\n                radius: 3\n            }\n        }, {\n            name: 'Kalman Prediction',\n            data: kalman_prediction,\n            color: 'rgba(223, 83, 83, .5)',\n            lineWidth: 0,\n            marker: {\n                enabled: true,\n                radius: 5\n            }\n        }];\n    }\n\n    $(function () {\n        var series = makeSeries(50, 25);\n        $('#hc_container').highcharts({\n            chart: {\n                type: 'scatter'\n            },\n            title: {\n                text: \"Kalman Filter\"\n            },\n            yAxis: {\n                plotLines: [{\n                    value: 0,\n                    width: 1,\n                    color: '#808080'\n                }]\n            },\n            legend: {\n                layout: 'vertical',\n                align: 'right',\n                verticalAlign: 'middle',\n                borderWidth: 0\n            },\n            series: series\n        });\n\n        $(\"#clear\").click(function () {\n            var chart = $('#hc_container').highcharts();\n            while (chart.series.length > 0) {\n                chart.series[0].remove();\n            }\n            real_numbers = [];\n            dirty_numbers = [];\n        });\n        var interval;\n        $(\"#measure\").click(function () {\n\n            if (typeof interval === \"number\") {\n                clearInterval(interval);\n                interval = null;\n                return;\n            }\n\n            interval = setInterval(function () {\n                var real1 = Number($(\"#real1\").val());\n                var real2 = Number($(\"#real2\").val());\n                real_numbers[real_number_array[0]].push(real1);\n                real_numbers[real_number_array[1]].push(real2);\n\n                fake_which = real_number_array[0];\n                var value1 = fakeNumber(null, real_numbers.length - 1);\n                fake_which = real_number_array[1];\n                var value2 = fakeNumber(null, real_numbers.length - 1);\n\n                var kvalue = kalman([value1, value2]);\n\n                var chart = $('#hc_container').highcharts();\n                if (chart.series.length == 0) {\n                    real_numbers = [real];\n                    var series = makeSeries(real_numbers[0], real_numbers.length);\n                    $(series).each(function (i, s) {\n                        chart.addSeries(s);\n                    });\n                }\n\n                var measurement = chart.series[0];\n                var kalmans = chart.series[1];\n                var shift = real_numbers[real_number_array[0]].length > 50;\n\n                measurement.addPoint([value1, value2], false, shift);\n                kalmans.addPoint(kvalue, false, shift);\n\n                chart.redraw();\n            }, 1000);\n        });\n\n        $(\"#real1, #real2\").change(function () {\n            eest = math.ones(2);\n            emea = math.ones(2);\n        });\n    });\n})(jQuery);\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyY1xca2FsbWFuX2ZpbHRlclxcMmRcXEthbG1hbi5lczYiXSwibmFtZXMiOlsicmVhbE51bWJlcnMiLCJkaXJ0eU51bWJlcnMiLCJrYWxtYW5QcmVkaWN0aW9uIiwiZmFrZV93aGljaCIsInJlYWxfbnVtYmVyX2FycmF5IiwiY2VzdCIsInBlc3QiLCJtYXRoIiwib25lcyIsIm1lYSIsImtnIiwiZWVzdCIsImVtZWEiLCIkIiwia2FsbWFuIiwibSIsImVlc3RQbHVzRW1lYSIsImFkZCIsImRvdERpdmlkZSIsIm1lYU1pbnVzUGVzdCIsInN1YnRyYWN0Iiwia2dUaW1lc01lYSIsImRvdE11bHRpcGx5IiwiZW1lYVBsdXNFZXN0IiwiZW1lYVRpbWVzRWVzdCIsInZhbHVlT2YiLCJmYWtlTnVtYmVyIiwiaSIsImN1cnJlbnQiLCJtaW4iLCJyZWFsX251bWJlcnMiLCJtYXgiLCJNYXRoIiwicmFuZG9tIiwibWFrZURpcnR5TnVtYmVycyIsInJlYWxfbnVtYmVyIiwibGVuZ3RoIiwiQXJyYXkiLCJhcHBseSIsIm1hcCIsInB1c2giLCJkaXJ0eV9udW1iZXJzIiwibWFrZVNlcmllcyIsInIxIiwicjIiLCJ6aXAiLCJlIiwiY29uc29sZSIsImxvZyIsImthbG1hbl9wcmVkaWN0aW9uIiwidmFsIiwibmFtZSIsImRhdGEiLCJsaW5lV2lkdGgiLCJjb2xvciIsIm1hcmtlciIsImVuYWJsZWQiLCJyYWRpdXMiLCJzZXJpZXMiLCJoaWdoY2hhcnRzIiwiY2hhcnQiLCJ0eXBlIiwidGl0bGUiLCJ0ZXh0IiwieUF4aXMiLCJwbG90TGluZXMiLCJ2YWx1ZSIsIndpZHRoIiwibGVnZW5kIiwibGF5b3V0IiwiYWxpZ24iLCJ2ZXJ0aWNhbEFsaWduIiwiYm9yZGVyV2lkdGgiLCJjbGljayIsInJlbW92ZSIsImludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwicmVhbDEiLCJOdW1iZXIiLCJyZWFsMiIsInZhbHVlMSIsInZhbHVlMiIsImt2YWx1ZSIsInJlYWwiLCJlYWNoIiwicyIsImFkZFNlcmllcyIsIm1lYXN1cmVtZW50Iiwia2FsbWFucyIsInNoaWZ0IiwiYWRkUG9pbnQiLCJyZWRyYXciLCJjaGFuZ2UiLCJqUXVlcnkiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQSxJQUNJLGtCQUFjO0FBQUE7O0FBQ1YsU0FBS0EsV0FBTCxHQUFtQixFQUFuQjtBQUNBLFNBQUtDLFlBQUwsR0FBb0IsRUFBcEI7QUFDQSxTQUFLQyxnQkFBTCxHQUF3QixJQUF4Qjs7QUFFQSxRQUFJQyxVQUFKOztBQUVBLFFBQUlDLG9CQUFvQixFQUF4Qjs7QUFFQSxRQUFJQyxJQUFKO0FBQUEsUUFDSUMsT0FBT0MsS0FBS0MsSUFBTCxDQUFVLENBQVYsQ0FEWDtBQUFBLFFBRUlDLEdBRko7QUFBQSxRQUdJQyxFQUhKO0FBQUEsUUFJSUMsT0FBT0osS0FBS0MsSUFBTCxDQUFVLENBQVYsQ0FKWDtBQUFBLFFBS0lJLE9BQU9MLEtBQUtDLElBQUwsQ0FBVSxDQUFWLENBTFg7QUFNSCxDQWhCTCxHQW9CQyxDQUFDLFVBQVNLLENBQVQsRUFBVzs7QUFHVCxhQUFTQyxNQUFULENBQWdCQyxDQUFoQixFQUFrQjtBQUNkTixjQUFNTSxDQUFOOztBQUVBLFlBQUlDLGVBQWVULEtBQUtVLEdBQUwsQ0FBU04sSUFBVCxFQUFlQyxJQUFmLENBQW5CO0FBQ0FGLGFBQUtILEtBQUtXLFNBQUwsQ0FBZVAsSUFBZixFQUFxQkssWUFBckIsQ0FBTDs7QUFFQSxZQUFJRyxlQUFlWixLQUFLYSxRQUFMLENBQWNYLEdBQWQsRUFBbUJILElBQW5CLENBQW5CO0FBQ0EsWUFBSWUsYUFBYWQsS0FBS2UsV0FBTCxDQUFpQlosRUFBakIsRUFBcUJTLFlBQXJCLENBQWpCO0FBQ0FkLGVBQU9FLEtBQUtVLEdBQUwsQ0FBU1gsSUFBVCxFQUFlZSxVQUFmLENBQVA7QUFDQWYsZUFBT0QsSUFBUDs7QUFFQSxZQUFJa0IsZUFBZWhCLEtBQUtVLEdBQUwsQ0FBU0wsSUFBVCxFQUFlRCxJQUFmLENBQW5CO0FBQ0EsWUFBSWEsZ0JB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UDtBQUNILFNBSEQ7QUFJSCxLQS9FRDtBQWdGSCxDQTdKQSxFQTZKRXNGLE1BN0pGIiwiZmlsZSI6IkthbG1hbi5lczYiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvcmljaC9QaHBzdG9ybVByb2plY3RzL2pzYWxnb3MiLCJzb3VyY2VzQ29udGVudCI6WyJuZXcgY2xhc3MgS2FsbWFuIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5yZWFsTnVtYmVycyA9IFtdO1xuICAgICAgICB0aGlzLmRpcnR5TnVtYmVycyA9IFtdO1xuICAgICAgICB0aGlzLmthbG1hblByZWRpY3Rpb24gPSBudWxsO1xuXG4gICAgICAgIHZhciBmYWtlX3doaWNoO1xuXG4gICAgICAgIHZhciByZWFsX251bWJlcl9hcnJheSA9IFtdO1xuXG4gICAgICAgIHZhciBjZXN0LFxuICAgICAgICAgICAgcGVzdCA9IG1hdGgub25lcygyKSxcbiAgICAgICAgICAgIG1lYSxcbiAgICAgICAgICAgIGtnLFxuICAgICAgICAgICAgZWVzdCA9IG1hdGgub25lcygyKSxcbiAgICAgICAgICAgIGVtZWEgPSBtYXRoLm9uZXMoMik7XG4gICAgfVxufVxuXG5cbjsoZnVuY3Rpb24oJCl7XG5cblxuICAgIGZ1bmN0aW9uIGthbG1hbihtKXtcbiAgICAgICAgbWVhID0gbTtcblxuICAgICAgICB2YXIgZWVzdFBsdXNFbWVhID0gbWF0aC5hZGQoZWVzdCwgZW1lYSk7XG4gICAgICAgIGtnID0gbWF0aC5kb3REaXZpZGUoZWVzdCwgZWVzdFBsdXNFbWVhKTtcblxuICAgICAgICB2YXIgbWVhTWludXNQZXN0ID0gbWF0aC5zdWJ0cmFjdChtZWEsIHBlc3QpO1xuICAgICAgICB2YXIga2dUaW1lc01lYSA9IG1hdGguZG90TXVsdGlwbHkoa2csIG1lYU1pbnVzUGVzdCk7XG4gICAgICAgIGNlc3QgPSBtYXRoLmFkZChwZXN0LCBrZ1RpbWVzTWVhKTtcbiAgICAgICAgcGVzdCA9IGNlc3Q7XG5cbiAgICAgICAgdmFyIGVtZWFQbHVzRWVzdCA9IG1hdGguYWRkKGVtZWEsIGVlc3QpO1xuICAgICAgICB2YXIgZW1lYVRpbWVzRWVzdCA9IG1hdGguZG90TXVsdGlwbHkoZW1lYSwgZWVzdCk7XG4gICAgICAgIGVlc3QgPSBtYXRoLmRvdERpdmlkZShlbWVhVGltZXNFZXN0LCBlbWVhUGx1c0Vlc3QpO1xuXG4gICAgICAgIHJldHVybiBjZXN0LnZhbHVlT2YoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBmYWtlTnVtYmVyKGksIGN1cnJlbnQpe1xuICAgICAgICB2YXIgbWluID0gcmVhbF9udW1iZXJzW2Zha2Vfd2hpY2hdW2N1cnJlbnRdIC0gcmVhbF9udW1iZXJzW2Zha2Vfd2hpY2hdW2N1cnJlbnRdICogLjg7XG4gICAgICAgIHZhciBtYXggPSByZWFsX251bWJlcnNbZmFrZV93aGljaF1bY3VycmVudF0gKyByZWFsX251bWJlcnNbZmFrZV93aGljaF1bY3VycmVudF0gKiAuODtcbiAgICAgICAgcmV0dXJuIE1hdGgucmFuZG9tKCkgKiAobWF4IC0gbWluKSArIG1pbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBtYWtlRGlydHlOdW1iZXJzKHJlYWxfbnVtYmVyLCBsZW5ndGgpIHtcbiAgICAgICAgcmVhbF9udW1iZXJzW3JlYWxfbnVtYmVyXSA9IEFycmF5XG4gICAgICAgICAgICAuYXBwbHkobnVsbCwge2xlbmd0aDogbGVuZ3RofSlcbiAgICAgICAgICAgIC5tYXAoZnVuY3Rpb24oaSwgY3VycmVudCl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlYWxfbnVtYmVyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIGZha2Vfd2hpY2ggPSByZWFsX251bWJlcjtcbiAgICAgICAgcmVhbF9udW1iZXJfYXJyYXkucHVzaChyZWFsX251bWJlcik7XG4gICAgICAgIGRpcnR5X251bWJlcnNbcmVhbF9udW1iZXJdID0gcmVhbF9udW1iZXJzW3JlYWxfbnVtYmVyXS5tYXAoZmFrZU51bWJlcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbWFrZVNlcmllcyhyMSwgcjIpe1xuXG4gICAgICAgIG1ha2VEaXJ0eU51bWJlcnMocjEsIDUwKTtcbiAgICAgICAgbWFrZURpcnR5TnVtYmVycyhyMiwgNTApO1xuXG5cbiAgICAgICAgdmFyIHppcCA9IGRpcnR5X251bWJlcnNbcjFdLm1hcChmdW5jdGlvbihlLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gW2UsIGRpcnR5X251bWJlcnNbcjJdW2ldXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGVzdCA9IHppcFswXTtcblxuICAgICAgICBjb25zb2xlLmxvZyhkaXJ0eV9udW1iZXJzLCB6aXApO1xuXG4gICAgICAgIGthbG1hbl9wcmVkaWN0aW9uID0gemlwLm1hcChrYWxtYW4pO1xuICAgICAgICAkKFwiI3JlYWwxXCIpLnZhbChyMSk7XG4gICAgICAgICQoXCIjcmVhbDJcIikudmFsKHIyKTtcblxuICAgICAgICByZXR1cm4gW3tcbiAgICAgICAgICAgIG5hbWU6ICdNZWFzdXJlbWVudDogJyxcbiAgICAgICAgICAgIGRhdGE6IHppcCxcbiAgICAgICAgICAgIGxpbmVXaWR0aCA6IDAsXG4gICAgICAgICAgICBjb2xvcjogJ3JnYmEoMTE5LCAxNTIsIDE5MSwgLjUpJyxcbiAgICAgICAgICAgIG1hcmtlciA6IHtcbiAgICAgICAgICAgICAgICBlbmFibGVkIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByYWRpdXMgOiAzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0se1xuICAgICAgICAgICAgbmFtZTogJ0thbG1hbiBQcmVkaWN0aW9uJyxcbiAgICAgICAgICAgIGRhdGE6IGthbG1hbl9wcmVkaWN0aW9uLFxuICAgICAgICAgICAgY29sb3I6ICdyZ2JhKDIyMywgODMsIDgzLCAuNSknLFxuICAgICAgICAgICAgbGluZVdpZHRoOiAwLFxuICAgICAgICAgICAgbWFya2VyOiB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICByYWRpdXM6IDVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfV07XG4gICAgfVxuXG4gICAgJChmdW5jdGlvbigpe1xuICAgICAgICB2YXIgc2VyaWVzID0gbWFrZVNlcmllcyg1MCwgMjUpO1xuICAgICAgICAkKCcjaGNfY29udGFpbmVyJykuaGlnaGNoYXJ0cyh7XG4gICAgICAgICAgICBjaGFydDoge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdzY2F0dGVyJ1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRpdGxlOiB7XG4gICAgICAgICAgICAgICAgdGV4dDogXCJLYWxtYW4gRmlsdGVyXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB5QXhpczoge1xuICAgICAgICAgICAgICAgIHBsb3RMaW5lczogW3tcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxLFxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogJyM4MDgwODAnXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsZWdlbmQ6IHtcbiAgICAgICAgICAgICAgICBsYXlvdXQ6ICd2ZXJ0aWNhbCcsXG4gICAgICAgICAgICAgICAgYWxpZ246ICdyaWdodCcsXG4gICAgICAgICAgICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZScsXG4gICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXJpZXM6IHNlcmllc1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiI2NsZWFyXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgY2hhcnQgPSAkKCcjaGNfY29udGFpbmVyJykuaGlnaGNoYXJ0cygpO1xuICAgICAgICAgICAgd2hpbGUoY2hhcnQuc2VyaWVzLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgICAgIGNoYXJ0LnNlcmllc1swXS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlYWxfbnVtYmVycyA9IFtdO1xuICAgICAgICAgICAgZGlydHlfbnVtYmVycyA9IFtdO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGludGVydmFsO1xuICAgICAgICAkKFwiI21lYXN1cmVcIikuY2xpY2soZnVuY3Rpb24oKXtcblxuICAgICAgICAgICAgaWYodHlwZW9mKGludGVydmFsKSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgIGludGVydmFsID0gbnVsbDtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlYWwxID0gTnVtYmVyKCQoXCIjcmVhbDFcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIHZhciByZWFsMiA9IE51bWJlcigkKFwiI3JlYWwyXCIpLnZhbCgpKTtcbiAgICAgICAgICAgICAgICByZWFsX251bWJlcnNbcmVhbF9udW1iZXJfYXJyYXlbMF1dLnB1c2gocmVhbDEpO1xuICAgICAgICAgICAgICAgIHJlYWxfbnVtYmVyc1tyZWFsX251bWJlcl9hcnJheVsxXV0ucHVzaChyZWFsMik7XG5cbiAgICAgICAgICAgICAgICBmYWtlX3doaWNoID0gcmVhbF9udW1iZXJfYXJyYXlbMF07XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlMSA9IGZha2VOdW1iZXIobnVsbCwgcmVhbF9udW1iZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICAgICAgICAgIGZha2Vfd2hpY2ggPSByZWFsX251bWJlcl9hcnJheVsxXTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUyID0gZmFrZU51bWJlcihudWxsLCByZWFsX251bWJlcnMubGVuZ3RoIC0gMSk7XG5cbiAgICAgICAgICAgICAgICB2YXIga3ZhbHVlID0ga2FsbWFuKFt2YWx1ZTEsIHZhbHVlMl0pO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNoYXJ0ID0gJCgnI2hjX2NvbnRhaW5lcicpLmhpZ2hjaGFydHMoKTtcbiAgICAgICAgICAgICAgICBpZiAoY2hhcnQuc2VyaWVzLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlYWxfbnVtYmVycyA9IFtyZWFsXTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcmllcyA9IG1ha2VTZXJpZXMocmVhbF9udW1iZXJzWzBdLCByZWFsX251bWJlcnMubGVuZ3RoKTtcbiAgICAgICAgICAgICAgICAgICAgJChzZXJpZXMpLmVhY2goZnVuY3Rpb24gKGksIHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYXJ0LmFkZFNlcmllcyhzKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIG1lYXN1cmVtZW50ID0gY2hhcnQuc2VyaWVzWzBdO1xuICAgICAgICAgICAgICAgIHZhciBrYWxtYW5zID0gY2hhcnQuc2VyaWVzWzFdO1xuICAgICAgICAgICAgICAgIHZhciBzaGlmdCA9IHJlYWxfbnVtYmVyc1tyZWFsX251bWJlcl9hcnJheVswXV0ubGVuZ3RoID4gNTA7XG5cbiAgICAgICAgICAgICAgICBtZWFzdXJlbWVudC5hZGRQb2ludChbdmFsdWUxLCB2YWx1ZTJdLCBmYWxzZSwgc2hpZnQpO1xuICAgICAgICAgICAgICAgIGthbG1hbnMuYWRkUG9pbnQoa3ZhbHVlLCBmYWxzZSwgc2hpZnQpO1xuXG4gICAgICAgICAgICAgICAgY2hhcnQucmVkcmF3KCk7XG4gICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIiNyZWFsMSwgI3JlYWwyXCIpLmNoYW5nZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgZWVzdCA9IG1hdGgub25lcygyKTtcbiAgICAgICAgICAgIGVtZWEgPSBtYXRoLm9uZXMoMik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTsiXX0=\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(0);\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// dist/kalman_filter/2d/kalman_filter.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b2ab3b24123a56668349","new class Kalman {\n    constructor() {\n        this.realNumbers = [];\n        this.dirtyNumbers = [];\n        this.kalmanPrediction = null;\n\n        var fake_which;\n\n        var real_number_array = [];\n\n        var cest,\n            pest = math.ones(2),\n            mea,\n            kg,\n            eest = math.ones(2),\n            emea = math.ones(2);\n    }\n}\n\n\n;(function($){\n\n\n    function kalman(m){\n        mea = m;\n\n        var eestPlusEmea = math.add(eest, emea);\n        kg = math.dotDivide(eest, eestPlusEmea);\n\n        var meaMinusPest = math.subtract(mea, pest);\n        var kgTimesMea = math.dotMultiply(kg, meaMinusPest);\n        cest = math.add(pest, kgTimesMea);\n        pest = cest;\n\n        var emeaPlusEest = math.add(emea, eest);\n        var emeaTimesEest = math.dotMultiply(emea, eest);\n        eest = math.dotDivide(emeaTimesEest, emeaPlusEest);\n\n        return cest.valueOf();\n    }\n\n    function fakeNumber(i, current){\n        var min = real_numbers[fake_which][current] - real_numbers[fake_which][current] * .8;\n        var max = real_numbers[fake_which][current] + real_numbers[fake_which][current] * .8;\n        return Math.random() * (max - min) + min;\n    }\n\n    function makeDirtyNumbers(real_number, length) {\n        real_numbers[real_number] = Array\n            .apply(null, {length: length})\n            .map(function(i, current){\n                return real_number;\n            });\n        fake_which = real_number;\n        real_number_array.push(real_number);\n        dirty_numbers[real_number] = real_numbers[real_number].map(fakeNumber);\n    }\n\n    function makeSeries(r1, r2){\n\n        makeDirtyNumbers(r1, 50);\n        makeDirtyNumbers(r2, 50);\n\n\n        var zip = dirty_numbers[r1].map(function(e, i) {\n            return [e, dirty_numbers[r2][i]];\n        });\n\n        pest = zip[0];\n\n        console.log(dirty_numbers, zip);\n\n        kalman_prediction = zip.map(kalman);\n        $(\"#real1\").val(r1);\n        $(\"#real2\").val(r2);\n\n        return [{\n            name: 'Measurement: ',\n            data: zip,\n            lineWidth : 0,\n            color: 'rgba(119, 152, 191, .5)',\n            marker : {\n                enabled : true,\n                radius : 3\n            }\n        },{\n            name: 'Kalman Prediction',\n            data: kalman_prediction,\n            color: 'rgba(223, 83, 83, .5)',\n            lineWidth: 0,\n            marker: {\n                enabled: true,\n                radius: 5\n            }\n        }];\n    }\n\n    $(function(){\n        var series = makeSeries(50, 25);\n        $('#hc_container').highcharts({\n            chart: {\n                type: 'scatter'\n            },\n            title: {\n                text: \"Kalman Filter\"\n            },\n            yAxis: {\n                plotLines: [{\n                    value: 0,\n                    width: 1,\n                    color: '#808080'\n                }]\n            },\n            legend: {\n                layout: 'vertical',\n                align: 'right',\n                verticalAlign: 'middle',\n                borderWidth: 0\n            },\n            series: series\n        });\n\n        $(\"#clear\").click(function(){\n            var chart = $('#hc_container').highcharts();\n            while(chart.series.length > 0){\n                chart.series[0].remove();\n            }\n            real_numbers = [];\n            dirty_numbers = [];\n        });\n        var interval;\n        $(\"#measure\").click(function(){\n\n            if(typeof(interval) === \"number\") {\n                clearInterval(interval);\n                interval = null;\n                return;\n            }\n\n            interval = setInterval(function() {\n                var real1 = Number($(\"#real1\").val());\n                var real2 = Number($(\"#real2\").val());\n                real_numbers[real_number_array[0]].push(real1);\n                real_numbers[real_number_array[1]].push(real2);\n\n                fake_which = real_number_array[0];\n                var value1 = fakeNumber(null, real_numbers.length - 1);\n                fake_which = real_number_array[1];\n                var value2 = fakeNumber(null, real_numbers.length - 1);\n\n                var kvalue = kalman([value1, value2]);\n\n                var chart = $('#hc_container').highcharts();\n                if (chart.series.length == 0) {\n                    real_numbers = [real];\n                    var series = makeSeries(real_numbers[0], real_numbers.length);\n                    $(series).each(function (i, s) {\n                        chart.addSeries(s);\n                    });\n                }\n\n                var measurement = chart.series[0];\n                var kalmans = chart.series[1];\n                var shift = real_numbers[real_number_array[0]].length > 50;\n\n                measurement.addPoint([value1, value2], false, shift);\n                kalmans.addPoint(kvalue, false, shift);\n\n                chart.redraw();\n            }, 1000);\n        });\n\n        $(\"#real1, #real2\").change(function(){\n            eest = math.ones(2);\n            emea = math.ones(2);\n        });\n    });\n})(jQuery);\n\n\n// WEBPACK FOOTER //\n// ./src/kalman_filter/2d/Kalman.es6"],"sourceRoot":""}